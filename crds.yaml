---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: mongodb.mongodb.com
spec:
  group: mongodb.com
  names:
    kind: MongoDB
    listKind: MongoDBList
    plural: mongodb
    shortNames:
    - mdb
    singular: mongodb
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Current state of the MongoDB deployment.
      jsonPath: .status.phase
      name: Phase
      type: string
    - description: Version of MongoDB server.
      jsonPath: .status.version
      name: Version
      type: string
    - description: The type of MongoDB deployment. One of 'ReplicaSet', 'ShardedCluster'
        and 'Standalone'.
      jsonPath: .spec.type
      name: Type
      type: string
    - description: The time since the MongoDB resource was created.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            properties:
              additionalMongodConfig:
                description: |-
                  AdditionalMongodConfig is additional configuration that can be passed to
                  each data-bearing mongod at runtime. Uses the same structure as the mongod
                  configuration file:
                  https://docs.mongodb.com/manual/reference/configuration-options/
                type: object
                x-kubernetes-preserve-unknown-fields: true
              agent:
                properties:
                  backupAgent:
                    properties:
                      logRotate:
                        description: LogRotate configures log rotation for the BackupAgent
                          processes
                        properties:
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              OM only supports ints
                            type: integer
                          timeThresholdHrs:
                            description: Number of hours after which this MongoDB
                              Agent rotates the log file.
                            type: integer
                        type: object
                    type: object
                  logLevel:
                    type: string
                  logRotate:
                    description: DEPRECATED please use mongod.logRotate
                    properties:
                      includeAuditLogsWithMongoDBLogs:
                        description: |-
                          set to 'true' to have the Automation Agent rotate the audit files along
                          with mongodb log files
                        type: boolean
                      numTotal:
                        description: maximum number of log files to have total
                        type: integer
                      numUncompressed:
                        description: maximum number of log files to leave uncompressed
                        type: integer
                      percentOfDiskspace:
                        description: |-
                          Maximum percentage of the total disk space these log files should take up.
                          The string needs to be able to be converted to float64
                        type: string
                      sizeThresholdMB:
                        description: |-
                          Maximum size for an individual log file before rotation.
                          The string needs to be able to be converted to float64.
                          Fractional values of MB are supported.
                        type: string
                      timeThresholdHrs:
                        description: maximum hours for an individual log file before
                          rotation
                        type: integer
                    required:
                    - sizeThresholdMB
                    - timeThresholdHrs
                    type: object
                  maxLogFileDurationHours:
                    type: integer
                  mongod:
                    description: AgentLoggingMongodConfig contain settings for the
                      mongodb processes configured by the agent
                    properties:
                      auditlogRotate:
                        description: LogRotate configures audit log rotation for the
                          mongodb processes
                        properties:
                          includeAuditLogsWithMongoDBLogs:
                            description: |-
                              set to 'true' to have the Automation Agent rotate the audit files along
                              with mongodb log files
                            type: boolean
                          numTotal:
                            description: maximum number of log files to have total
                            type: integer
                          numUncompressed:
                            description: maximum number of log files to leave uncompressed
                            type: integer
                          percentOfDiskspace:
                            description: |-
                              Maximum percentage of the total disk space these log files should take up.
                              The string needs to be able to be converted to float64
                            type: string
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              The string needs to be able to be converted to float64.
                              Fractional values of MB are supported.
                            type: string
                          timeThresholdHrs:
                            description: maximum hours for an individual log file
                              before rotation
                            type: integer
                        required:
                        - sizeThresholdMB
                        - timeThresholdHrs
                        type: object
                      logRotate:
                        description: LogRotate configures log rotation for the mongodb
                          processes
                        properties:
                          includeAuditLogsWithMongoDBLogs:
                            description: |-
                              set to 'true' to have the Automation Agent rotate the audit files along
                              with mongodb log files
                            type: boolean
                          numTotal:
                            description: maximum number of log files to have total
                            type: integer
                          numUncompressed:
                            description: maximum number of log files to leave uncompressed
                            type: integer
                          percentOfDiskspace:
                            description: |-
                              Maximum percentage of the total disk space these log files should take up.
                              The string needs to be able to be converted to float64
                            type: string
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              The string needs to be able to be converted to float64.
                              Fractional values of MB are supported.
                            type: string
                          timeThresholdHrs:
                            description: maximum hours for an individual log file
                              before rotation
                            type: integer
                        required:
                        - sizeThresholdMB
                        - timeThresholdHrs
                        type: object
                      systemLog:
                        description: SystemLog configures system log of mongod
                        properties:
                          destination:
                            type: string
                          logAppend:
                            type: boolean
                          path:
                            type: string
                        required:
                        - destination
                        - logAppend
                        - path
                        type: object
                    type: object
                  monitoringAgent:
                    properties:
                      logRotate:
                        description: LogRotate configures log rotation for the BackupAgent
                          processes
                        properties:
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              OM only supports ints
                            type: integer
                          timeThresholdHrs:
                            description: Number of hours after which this MongoDB
                              Agent rotates the log file.
                            type: integer
                        type: object
                    type: object
                  readinessProbe:
                    properties:
                      environmentVariables:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  startupOptions:
                    additionalProperties:
                      type: string
                    description: |-
                      StartupParameters can be used to configure the startup parameters with which the agent starts. That also contains
                      log rotation settings as defined here:
                    type: object
                  systemLog:
                    description: DEPRECATED please use mongod.systemLog
                    properties:
                      destination:
                        type: string
                      logAppend:
                        type: boolean
                      path:
                        type: string
                    required:
                    - destination
                    - logAppend
                    - path
                    type: object
                type: object
              backup:
                description: |-
                  Backup contains configuration options for configuring
                  backup for this MongoDB resource
                properties:
                  assignmentLabels:
                    description: Assignment Labels set in the Ops Manager
                    items:
                      type: string
                    type: array
                  autoTerminateOnDeletion:
                    description: |-
                      AutoTerminateOnDeletion indicates if the Operator should stop and terminate the Backup before the cleanup,
                      when the MongoDB CR is deleted
                    type: boolean
                  encryption:
                    description: Encryption settings
                    properties:
                      kmip:
                        description: Kmip corresponds to the KMIP configuration assigned
                          to the Ops Manager Project's configuration.
                        properties:
                          client:
                            description: KMIP Client configuration
                            properties:
                              clientCertificatePrefix:
                                description: |-
                                  A prefix used to construct KMIP client certificate (and corresponding password) Secret names.
                                  The names are generated using the following pattern:
                                  KMIP Client Certificate (TLS Secret):
                                    <clientCertificatePrefix>-<CR Name>-kmip-client
                                  KMIP Client Certificate Password:
                                    <clientCertificatePrefix>-<CR Name>-kmip-client-password
                                    The expected key inside is called "password".
                                type: string
                            type: object
                        required:
                        - client
                        type: object
                    type: object
                  mode:
                    enum:
                    - enabled
                    - disabled
                    - terminated
                    type: string
                  snapshotSchedule:
                    properties:
                      clusterCheckpointIntervalMin:
                        enum:
                        - 15
                        - 30
                        - 60
                        type: integer
                      dailySnapshotRetentionDays:
                        description: Number of days to retain daily snapshots. Setting
                          0 will disable this rule.
                        maximum: 365
                        minimum: 0
                        type: integer
                      fullIncrementalDayOfWeek:
                        description: Day of the week when Ops Manager takes a full
                          snapshot. This ensures a recent complete backup. Ops Manager
                          sets the default value to SUNDAY.
                        enum:
                        - SUNDAY
                        - MONDAY
                        - TUESDAY
                        - WEDNESDAY
                        - THURSDAY
                        - FRIDAY
                        - SATURDAY
                        type: string
                      monthlySnapshotRetentionMonths:
                        description: Number of months to retain weekly snapshots.
                          Setting 0 will disable this rule.
                        maximum: 36
                        minimum: 0
                        type: integer
                      pointInTimeWindowHours:
                        description: Number of hours in the past for which a point-in-time
                          snapshot can be created.
                        enum:
                        - 1
                        - 2
                        - 3
                        - 4
                        - 5
                        - 6
                        - 7
                        - 15
                        - 30
                        - 60
                        - 90
                        - 120
                        - 180
                        - 360
                        type: integer
                      referenceHourOfDay:
                        description: Hour of the day to schedule snapshots using a
                          24-hour clock, in UTC.
                        maximum: 23
                        minimum: 0
                        type: integer
                      referenceMinuteOfHour:
                        description: Minute of the hour to schedule snapshots, in
                          UTC.
                        maximum: 59
                        minimum: 0
                        type: integer
                      snapshotIntervalHours:
                        description: Number of hours between snapshots.
                        enum:
                        - 6
                        - 8
                        - 12
                        - 24
                        type: integer
                      snapshotRetentionDays:
                        description: Number of days to keep recent snapshots.
                        maximum: 365
                        minimum: 1
                        type: integer
                      weeklySnapshotRetentionWeeks:
                        description: Number of weeks to retain weekly snapshots. Setting
                          0 will disable this rule
                        maximum: 365
                        minimum: 0
                        type: integer
                    type: object
                type: object
              cloudManager:
                properties:
                  configMapRef:
                    properties:
                      name:
                        type: string
                    type: object
                type: object
              clusterDomain:
                format: hostname
                type: string
              configServerCount:
                type: integer
              configSrv:
                properties:
                  additionalMongodConfig:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  agent:
                    description: |-
                      Configuring logRotation is not allowed under this section.
                      Please use the most top level resource fields for this; spec.Agent
                    properties:
                      backupAgent:
                        properties:
                          logRotate:
                            description: LogRotate configures log rotation for the
                              BackupAgent processes
                            properties:
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  OM only supports ints
                                type: integer
                              timeThresholdHrs:
                                description: Number of hours after which this MongoDB
                                  Agent rotates the log file.
                                type: integer
                            type: object
                        type: object
                      logLevel:
                        type: string
                      logRotate:
                        description: DEPRECATED please use mongod.logRotate
                        properties:
                          includeAuditLogsWithMongoDBLogs:
                            description: |-
                              set to 'true' to have the Automation Agent rotate the audit files along
                              with mongodb log files
                            type: boolean
                          numTotal:
                            description: maximum number of log files to have total
                            type: integer
                          numUncompressed:
                            description: maximum number of log files to leave uncompressed
                            type: integer
                          percentOfDiskspace:
                            description: |-
                              Maximum percentage of the total disk space these log files should take up.
                              The string needs to be able to be converted to float64
                            type: string
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              The string needs to be able to be converted to float64.
                              Fractional values of MB are supported.
                            type: string
                          timeThresholdHrs:
                            description: maximum hours for an individual log file
                              before rotation
                            type: integer
                        required:
                        - sizeThresholdMB
                        - timeThresholdHrs
                        type: object
                      maxLogFileDurationHours:
                        type: integer
                      mongod:
                        description: AgentLoggingMongodConfig contain settings for
                          the mongodb processes configured by the agent
                        properties:
                          auditlogRotate:
                            description: LogRotate configures audit log rotation for
                              the mongodb processes
                            properties:
                              includeAuditLogsWithMongoDBLogs:
                                description: |-
                                  set to 'true' to have the Automation Agent rotate the audit files along
                                  with mongodb log files
                                type: boolean
                              numTotal:
                                description: maximum number of log files to have total
                                type: integer
                              numUncompressed:
                                description: maximum number of log files to leave
                                  uncompressed
                                type: integer
                              percentOfDiskspace:
                                description: |-
                                  Maximum percentage of the total disk space these log files should take up.
                                  The string needs to be able to be converted to float64
                                type: string
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  The string needs to be able to be converted to float64.
                                  Fractional values of MB are supported.
                                type: string
                              timeThresholdHrs:
                                description: maximum hours for an individual log file
                                  before rotation
                                type: integer
                            required:
                            - sizeThresholdMB
                            - timeThresholdHrs
                            type: object
                          logRotate:
                            description: LogRotate configures log rotation for the
                              mongodb processes
                            properties:
                              includeAuditLogsWithMongoDBLogs:
                                description: |-
                                  set to 'true' to have the Automation Agent rotate the audit files along
                                  with mongodb log files
                                type: boolean
                              numTotal:
                                description: maximum number of log files to have total
                                type: integer
                              numUncompressed:
                                description: maximum number of log files to leave
                                  uncompressed
                                type: integer
                              percentOfDiskspace:
                                description: |-
                                  Maximum percentage of the total disk space these log files should take up.
                                  The string needs to be able to be converted to float64
                                type: string
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  The string needs to be able to be converted to float64.
                                  Fractional values of MB are supported.
                                type: string
                              timeThresholdHrs:
                                description: maximum hours for an individual log file
                                  before rotation
                                type: integer
                            required:
                            - sizeThresholdMB
                            - timeThresholdHrs
                            type: object
                          systemLog:
                            description: SystemLog configures system log of mongod
                            properties:
                              destination:
                                type: string
                              logAppend:
                                type: boolean
                              path:
                                type: string
                            required:
                            - destination
                            - logAppend
                            - path
                            type: object
                        type: object
                      monitoringAgent:
                        properties:
                          logRotate:
                            description: LogRotate configures log rotation for the
                              BackupAgent processes
                            properties:
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  OM only supports ints
                                type: integer
                              timeThresholdHrs:
                                description: Number of hours after which this MongoDB
                                  Agent rotates the log file.
                                type: integer
                            type: object
                        type: object
                      readinessProbe:
                        properties:
                          environmentVariables:
                            additionalProperties:
                              type: string
                            type: object
                        type: object
                      startupOptions:
                        additionalProperties:
                          type: string
                        description: |-
                          StartupParameters can be used to configure the startup parameters with which the agent starts. That also contains
                          log rotation settings as defined here:
                        type: object
                      systemLog:
                        description: DEPRECATED please use mongod.systemLog
                        properties:
                          destination:
                            type: string
                          logAppend:
                            type: boolean
                          path:
                            type: string
                        required:
                        - destination
                        - logAppend
                        - path
                        type: object
                    type: object
                  clusterSpecList:
                    items:
                      description: |-
                        ClusterSpecItem is the mongodb multi-cluster spec that is specific to a
                        particular Kubernetes cluster, this maps to the statefulset created in each cluster
                      properties:
                        clusterName:
                          description: |-
                            ClusterName is name of the cluster where the MongoDB Statefulset will be scheduled, the
                            name should have a one on one mapping with the service-account created in the central cluster
                            to talk to the workload clusters.
                          type: string
                        externalAccess:
                          description: ExternalAccessConfiguration provides external
                            access configuration for Multi-Cluster.
                          properties:
                            externalDomain:
                              description: An external domain that is used for exposing
                                MongoDB to the outside world.
                              type: string
                            externalService:
                              description: Provides a way to override the default
                                (NodePort) Service
                              properties:
                                annotations:
                                  additionalProperties:
                                    type: string
                                  description: A map of annotations that shall be
                                    added to the externally available Service.
                                  type: object
                                spec:
                                  description: A wrapper for the Service spec object.
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                              type: object
                          type: object
                        memberConfig:
                          description: MemberConfig allows to specify votes, priorities
                            and tags for each of the mongodb process.
                          items:
                            properties:
                              priority:
                                type: string
                              tags:
                                additionalProperties:
                                  type: string
                                type: object
                              votes:
                                type: integer
                            type: object
                          type: array
                        members:
                          description: Amount of members for this MongoDB Replica
                            Set
                          type: integer
                        podSpec:
                          properties:
                            persistence:
                              description: Note, that this field is used by MongoDB
                                resources only, let's keep it here for simplicity
                              properties:
                                multiple:
                                  properties:
                                    data:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                    journal:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                    logs:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                  type: object
                                single:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                              type: object
                            podTemplate:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          type: object
                        service:
                          description: this is an optional service, it will get the
                            name "<rsName>-service" in case not provided
                          type: string
                        statefulSet:
                          description: |-
                            StatefulSetConfiguration holds the optional custom StatefulSet
                            that should be merged into the operator created one.
                          properties:
                            metadata:
                              description: StatefulSetMetadataWrapper is a wrapper
                                around Labels and Annotations
                              properties:
                                annotations:
                                  additionalProperties:
                                    type: string
                                  type: object
                                labels:
                                  additionalProperties:
                                    type: string
                                  type: object
                              type: object
                            spec:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - spec
                          type: object
                      required:
                      - members
                      type: object
                    type: array
                type: object
                x-kubernetes-preserve-unknown-fields: true
              configSrvPodSpec:
                properties:
                  persistence:
                    description: Note, that this field is used by MongoDB resources
                      only, let's keep it here for simplicity
                    properties:
                      multiple:
                        properties:
                          data:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          journal:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          logs:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                        type: object
                      single:
                        properties:
                          labelSelector:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          storage:
                            type: string
                          storageClass:
                            type: string
                        type: object
                    type: object
                  podTemplate:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              connectivity:
                properties:
                  replicaSetHorizons:
                    description: |-
                      ReplicaSetHorizons holds list of maps of horizons to be configured in each of MongoDB processes.
                      Horizons map horizon names to the node addresses for each process in the replicaset, e.g.:
                       [
                         {
                           "internal": "my-rs-0.my-internal-domain.com:31843",
                           "external": "my-rs-0.my-external-domain.com:21467"
                         },
                         {
                           "internal": "my-rs-1.my-internal-domain.com:31843",
                           "external": "my-rs-1.my-external-domain.com:21467"
                         },
                         ...
                       ]
                      The key of each item in the map is an arbitrary, user-chosen string that
                      represents the name of the horizon. The value of the item is the host and,
                      optionally, the port that this mongod node will be connected to from.
                    items:
                      additionalProperties:
                        type: string
                      type: object
                    type: array
                type: object
              credentials:
                description: Name of the Secret holding credentials information
                type: string
              duplicateServiceObjects:
                description: |-
                  In few service mesh options for ex: Istio, by default we would need to duplicate the
                  service objects created per pod in all the clusters to enable DNS resolution. Users can
                  however configure their ServiceMesh with DNS proxy(https://istio.io/latest/docs/ops/configuration/traffic-management/dns-proxy/)
                  enabled in which case the operator doesn't need to create the service objects per cluster. This options tells the operator
                  whether it should create the service objects in all the clusters or not. By default, if not specified the operator would create the duplicate svc objects.
                type: boolean
              externalAccess:
                description: ExternalAccessConfiguration provides external access
                  configuration.
                properties:
                  externalDomain:
                    description: An external domain that is used for exposing MongoDB
                      to the outside world.
                    type: string
                  externalService:
                    description: Provides a way to override the default (NodePort)
                      Service
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: A map of annotations that shall be added to the
                          externally available Service.
                        type: object
                      spec:
                        description: A wrapper for the Service spec object.
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                type: object
              featureCompatibilityVersion:
                type: string
              logLevel:
                enum:
                - DEBUG
                - INFO
                - WARN
                - ERROR
                - FATAL
                type: string
              memberConfig:
                description: MemberConfig allows to specify votes, priorities and
                  tags for each of the mongodb process.
                items:
                  properties:
                    priority:
                      type: string
                    tags:
                      additionalProperties:
                        type: string
                      type: object
                    votes:
                      type: integer
                  type: object
                type: array
                x-kubernetes-preserve-unknown-fields: true
              members:
                description: Amount of members for this MongoDB Replica Set
                type: integer
              mongodsPerShardCount:
                type: integer
              mongos:
                properties:
                  additionalMongodConfig:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  agent:
                    description: |-
                      Configuring logRotation is not allowed under this section.
                      Please use the most top level resource fields for this; spec.Agent
                    properties:
                      backupAgent:
                        properties:
                          logRotate:
                            description: LogRotate configures log rotation for the
                              BackupAgent processes
                            properties:
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  OM only supports ints
                                type: integer
                              timeThresholdHrs:
                                description: Number of hours after which this MongoDB
                                  Agent rotates the log file.
                                type: integer
                            type: object
                        type: object
                      logLevel:
                        type: string
                      logRotate:
                        description: DEPRECATED please use mongod.logRotate
                        properties:
                          includeAuditLogsWithMongoDBLogs:
                            description: |-
                              set to 'true' to have the Automation Agent rotate the audit files along
                              with mongodb log files
                            type: boolean
                          numTotal:
                            description: maximum number of log files to have total
                            type: integer
                          numUncompressed:
                            description: maximum number of log files to leave uncompressed
                            type: integer
                          percentOfDiskspace:
                            description: |-
                              Maximum percentage of the total disk space these log files should take up.
                              The string needs to be able to be converted to float64
                            type: string
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              The string needs to be able to be converted to float64.
                              Fractional values of MB are supported.
                            type: string
                          timeThresholdHrs:
                            description: maximum hours for an individual log file
                              before rotation
                            type: integer
                        required:
                        - sizeThresholdMB
                        - timeThresholdHrs
                        type: object
                      maxLogFileDurationHours:
                        type: integer
                      mongod:
                        description: AgentLoggingMongodConfig contain settings for
                          the mongodb processes configured by the agent
                        properties:
                          auditlogRotate:
                            description: LogRotate configures audit log rotation for
                              the mongodb processes
                            properties:
                              includeAuditLogsWithMongoDBLogs:
                                description: |-
                                  set to 'true' to have the Automation Agent rotate the audit files along
                                  with mongodb log files
                                type: boolean
                              numTotal:
                                description: maximum number of log files to have total
                                type: integer
                              numUncompressed:
                                description: maximum number of log files to leave
                                  uncompressed
                                type: integer
                              percentOfDiskspace:
                                description: |-
                                  Maximum percentage of the total disk space these log files should take up.
                                  The string needs to be able to be converted to float64
                                type: string
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  The string needs to be able to be converted to float64.
                                  Fractional values of MB are supported.
                                type: string
                              timeThresholdHrs:
                                description: maximum hours for an individual log file
                                  before rotation
                                type: integer
                            required:
                            - sizeThresholdMB
                            - timeThresholdHrs
                            type: object
                          logRotate:
                            description: LogRotate configures log rotation for the
                              mongodb processes
                            properties:
                              includeAuditLogsWithMongoDBLogs:
                                description: |-
                                  set to 'true' to have the Automation Agent rotate the audit files along
                                  with mongodb log files
                                type: boolean
                              numTotal:
                                description: maximum number of log files to have total
                                type: integer
                              numUncompressed:
                                description: maximum number of log files to leave
                                  uncompressed
                                type: integer
                              percentOfDiskspace:
                                description: |-
                                  Maximum percentage of the total disk space these log files should take up.
                                  The string needs to be able to be converted to float64
                                type: string
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  The string needs to be able to be converted to float64.
                                  Fractional values of MB are supported.
                                type: string
                              timeThresholdHrs:
                                description: maximum hours for an individual log file
                                  before rotation
                                type: integer
                            required:
                            - sizeThresholdMB
                            - timeThresholdHrs
                            type: object
                          systemLog:
                            description: SystemLog configures system log of mongod
                            properties:
                              destination:
                                type: string
                              logAppend:
                                type: boolean
                              path:
                                type: string
                            required:
                            - destination
                            - logAppend
                            - path
                            type: object
                        type: object
                      monitoringAgent:
                        properties:
                          logRotate:
                            description: LogRotate configures log rotation for the
                              BackupAgent processes
                            properties:
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  OM only supports ints
                                type: integer
                              timeThresholdHrs:
                                description: Number of hours after which this MongoDB
                                  Agent rotates the log file.
                                type: integer
                            type: object
                        type: object
                      readinessProbe:
                        properties:
                          environmentVariables:
                            additionalProperties:
                              type: string
                            type: object
                        type: object
                      startupOptions:
                        additionalProperties:
                          type: string
                        description: |-
                          StartupParameters can be used to configure the startup parameters with which the agent starts. That also contains
                          log rotation settings as defined here:
                        type: object
                      systemLog:
                        description: DEPRECATED please use mongod.systemLog
                        properties:
                          destination:
                            type: string
                          logAppend:
                            type: boolean
                          path:
                            type: string
                        required:
                        - destination
                        - logAppend
                        - path
                        type: object
                    type: object
                  clusterSpecList:
                    items:
                      description: |-
                        ClusterSpecItem is the mongodb multi-cluster spec that is specific to a
                        particular Kubernetes cluster, this maps to the statefulset created in each cluster
                      properties:
                        clusterName:
                          description: |-
                            ClusterName is name of the cluster where the MongoDB Statefulset will be scheduled, the
                            name should have a one on one mapping with the service-account created in the central cluster
                            to talk to the workload clusters.
                          type: string
                        externalAccess:
                          description: ExternalAccessConfiguration provides external
                            access configuration for Multi-Cluster.
                          properties:
                            externalDomain:
                              description: An external domain that is used for exposing
                                MongoDB to the outside world.
                              type: string
                            externalService:
                              description: Provides a way to override the default
                                (NodePort) Service
                              properties:
                                annotations:
                                  additionalProperties:
                                    type: string
                                  description: A map of annotations that shall be
                                    added to the externally available Service.
                                  type: object
                                spec:
                                  description: A wrapper for the Service spec object.
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                              type: object
                          type: object
                        memberConfig:
                          description: MemberConfig allows to specify votes, priorities
                            and tags for each of the mongodb process.
                          items:
                            properties:
                              priority:
                                type: string
                              tags:
                                additionalProperties:
                                  type: string
                                type: object
                              votes:
                                type: integer
                            type: object
                          type: array
                        members:
                          description: Amount of members for this MongoDB Replica
                            Set
                          type: integer
                        podSpec:
                          properties:
                            persistence:
                              description: Note, that this field is used by MongoDB
                                resources only, let's keep it here for simplicity
                              properties:
                                multiple:
                                  properties:
                                    data:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                    journal:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                    logs:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                  type: object
                                single:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                              type: object
                            podTemplate:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          type: object
                        service:
                          description: this is an optional service, it will get the
                            name "<rsName>-service" in case not provided
                          type: string
                        statefulSet:
                          description: |-
                            StatefulSetConfiguration holds the optional custom StatefulSet
                            that should be merged into the operator created one.
                          properties:
                            metadata:
                              description: StatefulSetMetadataWrapper is a wrapper
                                around Labels and Annotations
                              properties:
                                annotations:
                                  additionalProperties:
                                    type: string
                                  type: object
                                labels:
                                  additionalProperties:
                                    type: string
                                  type: object
                              type: object
                            spec:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - spec
                          type: object
                      required:
                      - members
                      type: object
                    type: array
                type: object
                x-kubernetes-preserve-unknown-fields: true
              mongosCount:
                type: integer
              mongosPodSpec:
                properties:
                  persistence:
                    description: Note, that this field is used by MongoDB resources
                      only, let's keep it here for simplicity
                    properties:
                      multiple:
                        properties:
                          data:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          journal:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          logs:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                        type: object
                      single:
                        properties:
                          labelSelector:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          storage:
                            type: string
                          storageClass:
                            type: string
                        type: object
                    type: object
                  podTemplate:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              opsManager:
                properties:
                  configMapRef:
                    properties:
                      name:
                        type: string
                    type: object
                type: object
              persistent:
                type: boolean
              podSpec:
                properties:
                  persistence:
                    description: Note, that this field is used by MongoDB resources
                      only, let's keep it here for simplicity
                    properties:
                      multiple:
                        properties:
                          data:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          journal:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          logs:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                        type: object
                      single:
                        properties:
                          labelSelector:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          storage:
                            type: string
                          storageClass:
                            type: string
                        type: object
                    type: object
                  podTemplate:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              prometheus:
                description: Prometheus configurations.
                properties:
                  metricsPath:
                    description: Indicates path to the metrics endpoint.
                    pattern: ^\/[a-z0-9]+$
                    type: string
                  passwordSecretRef:
                    description: Name of a Secret containing a HTTP Basic Auth Password.
                    properties:
                      key:
                        description: Key is the key in the secret storing this password.
                          Defaults to "password"
                        type: string
                      name:
                        description: Name is the name of the secret storing this user's
                          password
                        type: string
                    required:
                    - name
                    type: object
                  port:
                    description: Port where metrics endpoint will bind to. Defaults
                      to 9216.
                    type: integer
                  tlsSecretKeyRef:
                    description: |-
                      Name of a Secret (type kubernetes.io/tls) holding the certificates to use in the
                      Prometheus endpoint.
                    properties:
                      key:
                        description: Key is the key in the secret storing this password.
                          Defaults to "password"
                        type: string
                      name:
                        description: Name is the name of the secret storing this user's
                          password
                        type: string
                    required:
                    - name
                    type: object
                  username:
                    description: HTTP Basic Auth Username for metrics endpoint.
                    type: string
                required:
                - passwordSecretRef
                - username
                type: object
              security:
                properties:
                  authentication:
                    description: |-
                      Authentication holds various authentication related settings that affect
                      this MongoDB resource.
                    properties:
                      agents:
                        description: Agents contains authentication configuration
                          properties for the agents
                        properties:
                          automationLdapGroupDN:
                            type: string
                          automationPasswordSecretRef:
                            description: SecretKeySelector selects a key of a Secret.
                            properties:
                              key:
                                description: The key of the secret to select from.  Must
                                  be a valid secret key.
                                type: string
                              name:
                                default: ""
                                description: |-
                                  Name of the referent.
                                  This field is effectively required, but due to backwards compatibility is
                                  allowed to be empty. Instances of this type with an empty value here are
                                  almost certainly wrong.
                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                  TODO: Drop `kubebuilder:default` when controller-gen doesn't need it https://github.com/kubernetes-sigs/kubebuilder/issues/3896.
                                type: string
                              optional:
                                description: Specify whether the Secret or its key
                                  must be defined
                                type: boolean
                            required:
                            - key
                            type: object
                            x-kubernetes-map-type: atomic
                          automationUserName:
                            type: string
                          clientCertificateSecretRef:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          mode:
                            description: Mode is the desired Authentication mode that
                              the agents will use
                            type: string
                        required:
                        - mode
                        type: object
                      enabled:
                        type: boolean
                      ignoreUnknownUsers:
                        description: IgnoreUnknownUsers maps to the inverse of auth.authoritativeSet
                        type: boolean
                      internalCluster:
                        type: string
                      ldap:
                        description: LDAP Configuration
                        properties:
                          authzQueryTemplate:
                            type: string
                          bindQueryPasswordSecretRef:
                            properties:
                              name:
                                type: string
                            required:
                            - name
                            type: object
                          bindQueryUser:
                            type: string
                          caConfigMapRef:
                            description: Allows to point at a ConfigMap/key with a
                              CA file to mount on the Pod
                            properties:
                              key:
                                description: The key to select.
                                type: string
                              name:
                                default: ""
                                description: |-
                                  Name of the referent.
                                  This field is effectively required, but due to backwards compatibility is
                                  allowed to be empty. Instances of this type with an empty value here are
                                  almost certainly wrong.
                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                  TODO: Drop `kubebuilder:default` when controller-gen doesn't need it https://github.com/kubernetes-sigs/kubebuilder/issues/3896.
                                type: string
                              optional:
                                description: Specify whether the ConfigMap or its
                                  key must be defined
                                type: boolean
                            required:
                            - key
                            type: object
                            x-kubernetes-map-type: atomic
                          servers:
                            items:
                              type: string
                            type: array
                          timeoutMS:
                            type: integer
                          transportSecurity:
                            enum:
                            - tls
                            - none
                            type: string
                          userCacheInvalidationInterval:
                            type: integer
                          userToDNMapping:
                            type: string
                          validateLDAPServerConfig:
                            type: boolean
                        type: object
                      modes:
                        items:
                          enum:
                          - X509
                          - SCRAM
                          - SCRAM-SHA-1
                          - MONGODB-CR
                          - SCRAM-SHA-256
                          - LDAP
                          type: string
                        type: array
                      requireClientTLSAuthentication:
                        description: Clients should present valid TLS certificates
                        type: boolean
                    required:
                    - enabled
                    type: object
                  certsSecretPrefix:
                    type: string
                  roles:
                    items:
                      properties:
                        authenticationRestrictions:
                          items:
                            properties:
                              clientSource:
                                items:
                                  type: string
                                type: array
                              serverAddress:
                                items:
                                  type: string
                                type: array
                            type: object
                          type: array
                        db:
                          type: string
                        privileges:
                          items:
                            properties:
                              actions:
                                items:
                                  type: string
                                type: array
                              resource:
                                properties:
                                  cluster:
                                    type: boolean
                                  collection:
                                    type: string
                                  db:
                                    type: string
                                type: object
                            required:
                            - actions
                            - resource
                            type: object
                          type: array
                        role:
                          type: string
                        roles:
                          items:
                            properties:
                              db:
                                type: string
                              role:
                                type: string
                            required:
                            - db
                            - role
                            type: object
                          type: array
                      required:
                      - db
                      - role
                      type: object
                    type: array
                  tls:
                    properties:
                      additionalCertificateDomains:
                        items:
                          type: string
                        type: array
                      ca:
                        description: |-
                          CA corresponds to a ConfigMap containing an entry for the CA certificate (ca.pem)
                          used to validate the certificates created already.
                        type: string
                      enabled:
                        description: |-
                          DEPRECATED please enable TLS by setting `security.certsSecretPrefix` or `security.tls.secretRef.prefix`.
                          Enables TLS for this resource. This will make the operator try to mount a
                          Secret with a defined name (<resource-name>-cert).
                          This is only used when enabling TLS on a MongoDB resource, and not on the
                          AppDB, where TLS is configured by setting `secretRef.Name`.
                        type: boolean
                    type: object
                type: object
              service:
                description: |-
                  DEPRECATED please use `spec.statefulSet.spec.serviceName` to provide a custom service name.
                  this is an optional service, it will get the name "<rsName>-service" in case not provided
                type: string
              shard:
                properties:
                  additionalMongodConfig:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  agent:
                    description: |-
                      Configuring logRotation is not allowed under this section.
                      Please use the most top level resource fields for this; spec.Agent
                    properties:
                      backupAgent:
                        properties:
                          logRotate:
                            description: LogRotate configures log rotation for the
                              BackupAgent processes
                            properties:
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  OM only supports ints
                                type: integer
                              timeThresholdHrs:
                                description: Number of hours after which this MongoDB
                                  Agent rotates the log file.
                                type: integer
                            type: object
                        type: object
                      logLevel:
                        type: string
                      logRotate:
                        description: DEPRECATED please use mongod.logRotate
                        properties:
                          includeAuditLogsWithMongoDBLogs:
                            description: |-
                              set to 'true' to have the Automation Agent rotate the audit files along
                              with mongodb log files
                            type: boolean
                          numTotal:
                            description: maximum number of log files to have total
                            type: integer
                          numUncompressed:
                            description: maximum number of log files to leave uncompressed
                            type: integer
                          percentOfDiskspace:
                            description: |-
                              Maximum percentage of the total disk space these log files should take up.
                              The string needs to be able to be converted to float64
                            type: string
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              The string needs to be able to be converted to float64.
                              Fractional values of MB are supported.
                            type: string
                          timeThresholdHrs:
                            description: maximum hours for an individual log file
                              before rotation
                            type: integer
                        required:
                        - sizeThresholdMB
                        - timeThresholdHrs
                        type: object
                      maxLogFileDurationHours:
                        type: integer
                      mongod:
                        description: AgentLoggingMongodConfig contain settings for
                          the mongodb processes configured by the agent
                        properties:
                          auditlogRotate:
                            description: LogRotate configures audit log rotation for
                              the mongodb processes
                            properties:
                              includeAuditLogsWithMongoDBLogs:
                                description: |-
                                  set to 'true' to have the Automation Agent rotate the audit files along
                                  with mongodb log files
                                type: boolean
                              numTotal:
                                description: maximum number of log files to have total
                                type: integer
                              numUncompressed:
                                description: maximum number of log files to leave
                                  uncompressed
                                type: integer
                              percentOfDiskspace:
                                description: |-
                                  Maximum percentage of the total disk space these log files should take up.
                                  The string needs to be able to be converted to float64
                                type: string
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  The string needs to be able to be converted to float64.
                                  Fractional values of MB are supported.
                                type: string
                              timeThresholdHrs:
                                description: maximum hours for an individual log file
                                  before rotation
                                type: integer
                            required:
                            - sizeThresholdMB
                            - timeThresholdHrs
                            type: object
                          logRotate:
                            description: LogRotate configures log rotation for the
                              mongodb processes
                            properties:
                              includeAuditLogsWithMongoDBLogs:
                                description: |-
                                  set to 'true' to have the Automation Agent rotate the audit files along
                                  with mongodb log files
                                type: boolean
                              numTotal:
                                description: maximum number of log files to have total
                                type: integer
                              numUncompressed:
                                description: maximum number of log files to leave
                                  uncompressed
                                type: integer
                              percentOfDiskspace:
                                description: |-
                                  Maximum percentage of the total disk space these log files should take up.
                                  The string needs to be able to be converted to float64
                                type: string
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  The string needs to be able to be converted to float64.
                                  Fractional values of MB are supported.
                                type: string
                              timeThresholdHrs:
                                description: maximum hours for an individual log file
                                  before rotation
                                type: integer
                            required:
                            - sizeThresholdMB
                            - timeThresholdHrs
                            type: object
                          systemLog:
                            description: SystemLog configures system log of mongod
                            properties:
                              destination:
                                type: string
                              logAppend:
                                type: boolean
                              path:
                                type: string
                            required:
                            - destination
                            - logAppend
                            - path
                            type: object
                        type: object
                      monitoringAgent:
                        properties:
                          logRotate:
                            description: LogRotate configures log rotation for the
                              BackupAgent processes
                            properties:
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  OM only supports ints
                                type: integer
                              timeThresholdHrs:
                                description: Number of hours after which this MongoDB
                                  Agent rotates the log file.
                                type: integer
                            type: object
                        type: object
                      readinessProbe:
                        properties:
                          environmentVariables:
                            additionalProperties:
                              type: string
                            type: object
                        type: object
                      startupOptions:
                        additionalProperties:
                          type: string
                        description: |-
                          StartupParameters can be used to configure the startup parameters with which the agent starts. That also contains
                          log rotation settings as defined here:
                        type: object
                      systemLog:
                        description: DEPRECATED please use mongod.systemLog
                        properties:
                          destination:
                            type: string
                          logAppend:
                            type: boolean
                          path:
                            type: string
                        required:
                        - destination
                        - logAppend
                        - path
                        type: object
                    type: object
                  clusterSpecList:
                    items:
                      description: |-
                        ClusterSpecItem is the mongodb multi-cluster spec that is specific to a
                        particular Kubernetes cluster, this maps to the statefulset created in each cluster
                      properties:
                        clusterName:
                          description: |-
                            ClusterName is name of the cluster where the MongoDB Statefulset will be scheduled, the
                            name should have a one on one mapping with the service-account created in the central cluster
                            to talk to the workload clusters.
                          type: string
                        externalAccess:
                          description: ExternalAccessConfiguration provides external
                            access configuration for Multi-Cluster.
                          properties:
                            externalDomain:
                              description: An external domain that is used for exposing
                                MongoDB to the outside world.
                              type: string
                            externalService:
                              description: Provides a way to override the default
                                (NodePort) Service
                              properties:
                                annotations:
                                  additionalProperties:
                                    type: string
                                  description: A map of annotations that shall be
                                    added to the externally available Service.
                                  type: object
                                spec:
                                  description: A wrapper for the Service spec object.
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                              type: object
                          type: object
                        memberConfig:
                          description: MemberConfig allows to specify votes, priorities
                            and tags for each of the mongodb process.
                          items:
                            properties:
                              priority:
                                type: string
                              tags:
                                additionalProperties:
                                  type: string
                                type: object
                              votes:
                                type: integer
                            type: object
                          type: array
                        members:
                          description: Amount of members for this MongoDB Replica
                            Set
                          type: integer
                        podSpec:
                          properties:
                            persistence:
                              description: Note, that this field is used by MongoDB
                                resources only, let's keep it here for simplicity
                              properties:
                                multiple:
                                  properties:
                                    data:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                    journal:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                    logs:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                  type: object
                                single:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                              type: object
                            podTemplate:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          type: object
                        service:
                          description: this is an optional service, it will get the
                            name "<rsName>-service" in case not provided
                          type: string
                        statefulSet:
                          description: |-
                            StatefulSetConfiguration holds the optional custom StatefulSet
                            that should be merged into the operator created one.
                          properties:
                            metadata:
                              description: StatefulSetMetadataWrapper is a wrapper
                                around Labels and Annotations
                              properties:
                                annotations:
                                  additionalProperties:
                                    type: string
                                  type: object
                                labels:
                                  additionalProperties:
                                    type: string
                                  type: object
                              type: object
                            spec:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - spec
                          type: object
                      required:
                      - members
                      type: object
                    type: array
                type: object
                x-kubernetes-preserve-unknown-fields: true
              shardCount:
                type: integer
              shardOverrides:
                description: |-
                  ShardOverrides allow for overriding the configuration of a specific shard.
                  It replaces deprecated spec.shard.shardSpecificPodSpec field. When spec.shard.shardSpecificPodSpec is still defined then
                  spec.shard.shardSpecificPodSpec is applied first to the particular shard and then spec.shardOverrides is applied on top
                  of that (if defined for the same shard).
                items:
                  properties:
                    additionalMongodConfig:
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    agent:
                      properties:
                        backupAgent:
                          properties:
                            logRotate:
                              description: LogRotate configures log rotation for the
                                BackupAgent processes
                              properties:
                                sizeThresholdMB:
                                  description: |-
                                    Maximum size for an individual log file before rotation.
                                    OM only supports ints
                                  type: integer
                                timeThresholdHrs:
                                  description: Number of hours after which this MongoDB
                                    Agent rotates the log file.
                                  type: integer
                              type: object
                          type: object
                        logLevel:
                          type: string
                        logRotate:
                          description: DEPRECATED please use mongod.logRotate
                          properties:
                            includeAuditLogsWithMongoDBLogs:
                              description: |-
                                set to 'true' to have the Automation Agent rotate the audit files along
                                with mongodb log files
                              type: boolean
                            numTotal:
                              description: maximum number of log files to have total
                              type: integer
                            numUncompressed:
                              description: maximum number of log files to leave uncompressed
                              type: integer
                            percentOfDiskspace:
                              description: |-
                                Maximum percentage of the total disk space these log files should take up.
                                The string needs to be able to be converted to float64
                              type: string
                            sizeThresholdMB:
                              description: |-
                                Maximum size for an individual log file before rotation.
                                The string needs to be able to be converted to float64.
                                Fractional values of MB are supported.
                              type: string
                            timeThresholdHrs:
                              description: maximum hours for an individual log file
                                before rotation
                              type: integer
                          required:
                          - sizeThresholdMB
                          - timeThresholdHrs
                          type: object
                        maxLogFileDurationHours:
                          type: integer
                        mongod:
                          description: AgentLoggingMongodConfig contain settings for
                            the mongodb processes configured by the agent
                          properties:
                            auditlogRotate:
                              description: LogRotate configures audit log rotation
                                for the mongodb processes
                              properties:
                                includeAuditLogsWithMongoDBLogs:
                                  description: |-
                                    set to 'true' to have the Automation Agent rotate the audit files along
                                    with mongodb log files
                                  type: boolean
                                numTotal:
                                  description: maximum number of log files to have
                                    total
                                  type: integer
                                numUncompressed:
                                  description: maximum number of log files to leave
                                    uncompressed
                                  type: integer
                                percentOfDiskspace:
                                  description: |-
                                    Maximum percentage of the total disk space these log files should take up.
                                    The string needs to be able to be converted to float64
                                  type: string
                                sizeThresholdMB:
                                  description: |-
                                    Maximum size for an individual log file before rotation.
                                    The string needs to be able to be converted to float64.
                                    Fractional values of MB are supported.
                                  type: string
                                timeThresholdHrs:
                                  description: maximum hours for an individual log
                                    file before rotation
                                  type: integer
                              required:
                              - sizeThresholdMB
                              - timeThresholdHrs
                              type: object
                            logRotate:
                              description: LogRotate configures log rotation for the
                                mongodb processes
                              properties:
                                includeAuditLogsWithMongoDBLogs:
                                  description: |-
                                    set to 'true' to have the Automation Agent rotate the audit files along
                                    with mongodb log files
                                  type: boolean
                                numTotal:
                                  description: maximum number of log files to have
                                    total
                                  type: integer
                                numUncompressed:
                                  description: maximum number of log files to leave
                                    uncompressed
                                  type: integer
                                percentOfDiskspace:
                                  description: |-
                                    Maximum percentage of the total disk space these log files should take up.
                                    The string needs to be able to be converted to float64
                                  type: string
                                sizeThresholdMB:
                                  description: |-
                                    Maximum size for an individual log file before rotation.
                                    The string needs to be able to be converted to float64.
                                    Fractional values of MB are supported.
                                  type: string
                                timeThresholdHrs:
                                  description: maximum hours for an individual log
                                    file before rotation
                                  type: integer
                              required:
                              - sizeThresholdMB
                              - timeThresholdHrs
                              type: object
                            systemLog:
                              description: SystemLog configures system log of mongod
                              properties:
                                destination:
                                  type: string
                                logAppend:
                                  type: boolean
                                path:
                                  type: string
                              required:
                              - destination
                              - logAppend
                              - path
                              type: object
                          type: object
                        monitoringAgent:
                          properties:
                            logRotate:
                              description: LogRotate configures log rotation for the
                                BackupAgent processes
                              properties:
                                sizeThresholdMB:
                                  description: |-
                                    Maximum size for an individual log file before rotation.
                                    OM only supports ints
                                  type: integer
                                timeThresholdHrs:
                                  description: Number of hours after which this MongoDB
                                    Agent rotates the log file.
                                  type: integer
                              type: object
                          type: object
                        readinessProbe:
                          properties:
                            environmentVariables:
                              additionalProperties:
                                type: string
                              type: object
                          type: object
                        startupOptions:
                          additionalProperties:
                            type: string
                          description: |-
                            StartupParameters can be used to configure the startup parameters with which the agent starts. That also contains
                            log rotation settings as defined here:
                          type: object
                        systemLog:
                          description: DEPRECATED please use mongod.systemLog
                          properties:
                            destination:
                              type: string
                            logAppend:
                              type: boolean
                            path:
                              type: string
                          required:
                          - destination
                          - logAppend
                          - path
                          type: object
                      type: object
                    clusterSpecList:
                      items:
                        description: |-
                          ClusterSpecItemOverride is almost exact copy of ClusterSpecItem object.
                          The object is used in ClusterSpecList in ShardedClusterComponentOverrideSpec in shard overrides.
                          The difference lies in some fields being optional, e.g. Members to make it possible to NOT override fields and rely on
                          what was set in top level shard configuration.
                        properties:
                          clusterName:
                            description: |-
                              ClusterName is name of the cluster where the MongoDB Statefulset will be scheduled, the
                              name should have a one on one mapping with the service-account created in the central cluster
                              to talk to the workload clusters.
                            type: string
                          memberConfig:
                            description: MemberConfig allows to specify votes, priorities
                              and tags for each of the mongodb process.
                            items:
                              properties:
                                priority:
                                  type: string
                                tags:
                                  additionalProperties:
                                    type: string
                                  type: object
                                votes:
                                  type: integer
                              type: object
                            type: array
                            x-kubernetes-preserve-unknown-fields: true
                          members:
                            description: Amount of members for this MongoDB Replica
                              Set
                            type: integer
                          podSpec:
                            properties:
                              persistence:
                                description: Note, that this field is used by MongoDB
                                  resources only, let's keep it here for simplicity
                                properties:
                                  multiple:
                                    properties:
                                      data:
                                        properties:
                                          labelSelector:
                                            type: object
                                            x-kubernetes-preserve-unknown-fields: true
                                          storage:
                                            type: string
                                          storageClass:
                                            type: string
                                        type: object
                                      journal:
                                        properties:
                                          labelSelector:
                                            type: object
                                            x-kubernetes-preserve-unknown-fields: true
                                          storage:
                                            type: string
                                          storageClass:
                                            type: string
                                        type: object
                                      logs:
                                        properties:
                                          labelSelector:
                                            type: object
                                            x-kubernetes-preserve-unknown-fields: true
                                          storage:
                                            type: string
                                          storageClass:
                                            type: string
                                        type: object
                                    type: object
                                  single:
                                    properties:
                                      labelSelector:
                                        type: object
                                        x-kubernetes-preserve-unknown-fields: true
                                      storage:
                                        type: string
                                      storageClass:
                                        type: string
                                    type: object
                                type: object
                              podTemplate:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          statefulSet:
                            description: |-
                              StatefulSetConfiguration holds the optional custom StatefulSet
                              that should be merged into the operator created one.
                            properties:
                              metadata:
                                description: StatefulSetMetadataWrapper is a wrapper
                                  around Labels and Annotations
                                properties:
                                  annotations:
                                    additionalProperties:
                                      type: string
                                    type: object
                                  labels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              spec:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                            required:
                            - spec
                            type: object
                        type: object
                      type: array
                    memberConfig:
                      description: Process configuration override for this shard.
                        Used in SingleCluster only. The number of items specified
                        must be >= spec.mongodsPerShardCount or spec.shardOverride.members.
                      items:
                        properties:
                          priority:
                            type: string
                          tags:
                            additionalProperties:
                              type: string
                            type: object
                          votes:
                            type: integer
                        type: object
                      type: array
                      x-kubernetes-preserve-unknown-fields: true
                    members:
                      description: Number of member nodes in this shard. Used only
                        in SingleCluster. For MultiCluster the number of members is
                        specified in ShardOverride.ClusterSpecList.
                      type: integer
                    podSpec:
                      description: The following override fields work for SingleCluster
                        only. For MultiCluster - fields from specific clusters are
                        used.
                      properties:
                        persistence:
                          description: Note, that this field is used by MongoDB resources
                            only, let's keep it here for simplicity
                          properties:
                            multiple:
                              properties:
                                data:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                                journal:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                                logs:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                              type: object
                            single:
                              properties:
                                labelSelector:
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                storage:
                                  type: string
                                storageClass:
                                  type: string
                              type: object
                          type: object
                        podTemplate:
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                      type: object
                    shardNames:
                      items:
                        type: string
                      minItems: 1
                      type: array
                    statefulSet:
                      description: Statefulset override for this particular shard.
                      properties:
                        metadata:
                          description: StatefulSetMetadataWrapper is a wrapper around
                            Labels and Annotations
                          properties:
                            annotations:
                              additionalProperties:
                                type: string
                              type: object
                            labels:
                              additionalProperties:
                                type: string
                              type: object
                          type: object
                        spec:
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                      required:
                      - spec
                      type: object
                  required:
                  - shardNames
                  type: object
                type: array
              shardPodSpec:
                properties:
                  persistence:
                    description: Note, that this field is used by MongoDB resources
                      only, let's keep it here for simplicity
                    properties:
                      multiple:
                        properties:
                          data:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          journal:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          logs:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                        type: object
                      single:
                        properties:
                          labelSelector:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          storage:
                            type: string
                          storageClass:
                            type: string
                        type: object
                    type: object
                  podTemplate:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              shardSpecificPodSpec:
                description: |-
                  ShardSpecificPodSpec allows you to provide a Statefulset override per shard.
                  DEPRECATED please use spec.shard.shardOverrides instead
                items:
                  properties:
                    persistence:
                      description: Note, that this field is used by MongoDB resources
                        only, let's keep it here for simplicity
                      properties:
                        multiple:
                          properties:
                            data:
                              properties:
                                labelSelector:
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                storage:
                                  type: string
                                storageClass:
                                  type: string
                              type: object
                            journal:
                              properties:
                                labelSelector:
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                storage:
                                  type: string
                                storageClass:
                                  type: string
                              type: object
                            logs:
                              properties:
                                labelSelector:
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                storage:
                                  type: string
                                storageClass:
                                  type: string
                              type: object
                          type: object
                        single:
                          properties:
                            labelSelector:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                            storage:
                              type: string
                            storageClass:
                              type: string
                          type: object
                      type: object
                    podTemplate:
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  type: object
                type: array
              statefulSet:
                description: |-
                  StatefulSetConfiguration provides the statefulset override for each of the cluster's statefulset
                  if "StatefulSetConfiguration" is specified at cluster level under "clusterSpecList" that takes precedence over
                  the global one
                properties:
                  metadata:
                    description: StatefulSetMetadataWrapper is a wrapper around Labels
                      and Annotations
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - spec
                type: object
              topology:
                description: |-
                  Topology sets the desired cluster topology of MongoDB resources
                  It defaults (if empty or not set) to SingleCluster. If MultiCluster specified,
                  then clusterSpecList field is mandatory and at least one member cluster has to be specified.
                enum:
                - SingleCluster
                - MultiCluster
                type: string
              type:
                enum:
                - Standalone
                - ReplicaSet
                - ShardedCluster
                type: string
              version:
                pattern: ^[0-9]+.[0-9]+.[0-9]+(-.+)?$|^$
                type: string
            required:
            - credentials
            - type
            - version
            type: object
            x-kubernetes-preserve-unknown-fields: true
          status:
            properties:
              backup:
                properties:
                  statusName:
                    type: string
                required:
                - statusName
                type: object
              configServerCount:
                type: integer
              featureCompatibilityVersion:
                type: string
              lastTransition:
                type: string
              link:
                type: string
              members:
                type: integer
              message:
                type: string
              mongodsPerShardCount:
                type: integer
              mongosCount:
                type: integer
              observedGeneration:
                format: int64
                type: integer
              phase:
                type: string
              pvc:
                items:
                  properties:
                    phase:
                      type: string
                    statefulsetName:
                      type: string
                  required:
                  - phase
                  - statefulsetName
                  type: object
                type: array
              resourcesNotReady:
                items:
                  description: ResourceNotReady describes the dependent resource which
                    is not ready yet
                  properties:
                    errors:
                      items:
                        properties:
                          message:
                            type: string
                          reason:
                            type: string
                        type: object
                      type: array
                    kind:
                      description: ResourceKind specifies a kind of a Kubernetes resource.
                        Used in status of a Custom Resource
                      type: string
                    message:
                      type: string
                    name:
                      type: string
                  required:
                  - kind
                  - name
                  type: object
                type: array
              shardCount:
                type: integer
              sizeStatusInClusters:
                description: MongodbShardedSizeStatusInClusters describes the number
                  and sizes of replica sets members deployed across member clusters
                properties:
                  configServerMongodsInClusters:
                    additionalProperties:
                      type: integer
                    type: object
                  mongosCountInClusters:
                    additionalProperties:
                      type: integer
                    type: object
                  shardMongodsInClusters:
                    additionalProperties:
                      type: integer
                    type: object
                  shardOverridesInClusters:
                    additionalProperties:
                      additionalProperties:
                        type: integer
                      type: object
                    type: object
                type: object
              version:
                type: string
              warnings:
                items:
                  type: string
                type: array
            required:
            - phase
            - version
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: mongodbmulticluster.mongodb.com
spec:
  group: mongodb.com
  names:
    kind: MongoDBMultiCluster
    listKind: MongoDBMultiClusterList
    plural: mongodbmulticluster
    shortNames:
    - mdbmc
    singular: mongodbmulticluster
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Current state of the MongoDB deployment.
      jsonPath: .status.phase
      name: Phase
      type: string
    - description: The time since the MongoDBMultiCluster resource was created.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            properties:
              additionalMongodConfig:
                description: |-
                  AdditionalMongodConfig is additional configuration that can be passed to
                  each data-bearing mongod at runtime. Uses the same structure as the mongod
                  configuration file:
                  https://docs.mongodb.com/manual/reference/configuration-options/
                type: object
                x-kubernetes-preserve-unknown-fields: true
              agent:
                properties:
                  backupAgent:
                    properties:
                      logRotate:
                        description: LogRotate configures log rotation for the BackupAgent
                          processes
                        properties:
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              OM only supports ints
                            type: integer
                          timeThresholdHrs:
                            description: Number of hours after which this MongoDB
                              Agent rotates the log file.
                            type: integer
                        type: object
                    type: object
                  logLevel:
                    type: string
                  logRotate:
                    description: DEPRECATED please use mongod.logRotate
                    properties:
                      includeAuditLogsWithMongoDBLogs:
                        description: |-
                          set to 'true' to have the Automation Agent rotate the audit files along
                          with mongodb log files
                        type: boolean
                      numTotal:
                        description: maximum number of log files to have total
                        type: integer
                      numUncompressed:
                        description: maximum number of log files to leave uncompressed
                        type: integer
                      percentOfDiskspace:
                        description: |-
                          Maximum percentage of the total disk space these log files should take up.
                          The string needs to be able to be converted to float64
                        type: string
                      sizeThresholdMB:
                        description: |-
                          Maximum size for an individual log file before rotation.
                          The string needs to be able to be converted to float64.
                          Fractional values of MB are supported.
                        type: string
                      timeThresholdHrs:
                        description: maximum hours for an individual log file before
                          rotation
                        type: integer
                    required:
                    - sizeThresholdMB
                    - timeThresholdHrs
                    type: object
                  maxLogFileDurationHours:
                    type: integer
                  mongod:
                    description: AgentLoggingMongodConfig contain settings for the
                      mongodb processes configured by the agent
                    properties:
                      auditlogRotate:
                        description: LogRotate configures audit log rotation for the
                          mongodb processes
                        properties:
                          includeAuditLogsWithMongoDBLogs:
                            description: |-
                              set to 'true' to have the Automation Agent rotate the audit files along
                              with mongodb log files
                            type: boolean
                          numTotal:
                            description: maximum number of log files to have total
                            type: integer
                          numUncompressed:
                            description: maximum number of log files to leave uncompressed
                            type: integer
                          percentOfDiskspace:
                            description: |-
                              Maximum percentage of the total disk space these log files should take up.
                              The string needs to be able to be converted to float64
                            type: string
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              The string needs to be able to be converted to float64.
                              Fractional values of MB are supported.
                            type: string
                          timeThresholdHrs:
                            description: maximum hours for an individual log file
                              before rotation
                            type: integer
                        required:
                        - sizeThresholdMB
                        - timeThresholdHrs
                        type: object
                      logRotate:
                        description: LogRotate configures log rotation for the mongodb
                          processes
                        properties:
                          includeAuditLogsWithMongoDBLogs:
                            description: |-
                              set to 'true' to have the Automation Agent rotate the audit files along
                              with mongodb log files
                            type: boolean
                          numTotal:
                            description: maximum number of log files to have total
                            type: integer
                          numUncompressed:
                            description: maximum number of log files to leave uncompressed
                            type: integer
                          percentOfDiskspace:
                            description: |-
                              Maximum percentage of the total disk space these log files should take up.
                              The string needs to be able to be converted to float64
                            type: string
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              The string needs to be able to be converted to float64.
                              Fractional values of MB are supported.
                            type: string
                          timeThresholdHrs:
                            description: maximum hours for an individual log file
                              before rotation
                            type: integer
                        required:
                        - sizeThresholdMB
                        - timeThresholdHrs
                        type: object
                      systemLog:
                        description: SystemLog configures system log of mongod
                        properties:
                          destination:
                            type: string
                          logAppend:
                            type: boolean
                          path:
                            type: string
                        required:
                        - destination
                        - logAppend
                        - path
                        type: object
                    type: object
                  monitoringAgent:
                    properties:
                      logRotate:
                        description: LogRotate configures log rotation for the BackupAgent
                          processes
                        properties:
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              OM only supports ints
                            type: integer
                          timeThresholdHrs:
                            description: Number of hours after which this MongoDB
                              Agent rotates the log file.
                            type: integer
                        type: object
                    type: object
                  readinessProbe:
                    properties:
                      environmentVariables:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  startupOptions:
                    additionalProperties:
                      type: string
                    description: |-
                      StartupParameters can be used to configure the startup parameters with which the agent starts. That also contains
                      log rotation settings as defined here:
                    type: object
                  systemLog:
                    description: DEPRECATED please use mongod.systemLog
                    properties:
                      destination:
                        type: string
                      logAppend:
                        type: boolean
                      path:
                        type: string
                    required:
                    - destination
                    - logAppend
                    - path
                    type: object
                type: object
              backup:
                description: |-
                  Backup contains configuration options for configuring
                  backup for this MongoDB resource
                properties:
                  assignmentLabels:
                    description: Assignment Labels set in the Ops Manager
                    items:
                      type: string
                    type: array
                  autoTerminateOnDeletion:
                    description: |-
                      AutoTerminateOnDeletion indicates if the Operator should stop and terminate the Backup before the cleanup,
                      when the MongoDB CR is deleted
                    type: boolean
                  encryption:
                    description: Encryption settings
                    properties:
                      kmip:
                        description: Kmip corresponds to the KMIP configuration assigned
                          to the Ops Manager Project's configuration.
                        properties:
                          client:
                            description: KMIP Client configuration
                            properties:
                              clientCertificatePrefix:
                                description: |-
                                  A prefix used to construct KMIP client certificate (and corresponding password) Secret names.
                                  The names are generated using the following pattern:
                                  KMIP Client Certificate (TLS Secret):
                                    <clientCertificatePrefix>-<CR Name>-kmip-client
                                  KMIP Client Certificate Password:
                                    <clientCertificatePrefix>-<CR Name>-kmip-client-password
                                    The expected key inside is called "password".
                                type: string
                            type: object
                        required:
                        - client
                        type: object
                    type: object
                  mode:
                    enum:
                    - enabled
                    - disabled
                    - terminated
                    type: string
                  snapshotSchedule:
                    properties:
                      clusterCheckpointIntervalMin:
                        enum:
                        - 15
                        - 30
                        - 60
                        type: integer
                      dailySnapshotRetentionDays:
                        description: Number of days to retain daily snapshots. Setting
                          0 will disable this rule.
                        maximum: 365
                        minimum: 0
                        type: integer
                      fullIncrementalDayOfWeek:
                        description: Day of the week when Ops Manager takes a full
                          snapshot. This ensures a recent complete backup. Ops Manager
                          sets the default value to SUNDAY.
                        enum:
                        - SUNDAY
                        - MONDAY
                        - TUESDAY
                        - WEDNESDAY
                        - THURSDAY
                        - FRIDAY
                        - SATURDAY
                        type: string
                      monthlySnapshotRetentionMonths:
                        description: Number of months to retain weekly snapshots.
                          Setting 0 will disable this rule.
                        maximum: 36
                        minimum: 0
                        type: integer
                      pointInTimeWindowHours:
                        description: Number of hours in the past for which a point-in-time
                          snapshot can be created.
                        enum:
                        - 1
                        - 2
                        - 3
                        - 4
                        - 5
                        - 6
                        - 7
                        - 15
                        - 30
                        - 60
                        - 90
                        - 120
                        - 180
                        - 360
                        type: integer
                      referenceHourOfDay:
                        description: Hour of the day to schedule snapshots using a
                          24-hour clock, in UTC.
                        maximum: 23
                        minimum: 0
                        type: integer
                      referenceMinuteOfHour:
                        description: Minute of the hour to schedule snapshots, in
                          UTC.
                        maximum: 59
                        minimum: 0
                        type: integer
                      snapshotIntervalHours:
                        description: Number of hours between snapshots.
                        enum:
                        - 6
                        - 8
                        - 12
                        - 24
                        type: integer
                      snapshotRetentionDays:
                        description: Number of days to keep recent snapshots.
                        maximum: 365
                        minimum: 1
                        type: integer
                      weeklySnapshotRetentionWeeks:
                        description: Number of weeks to retain weekly snapshots. Setting
                          0 will disable this rule
                        maximum: 365
                        minimum: 0
                        type: integer
                    type: object
                type: object
              cloudManager:
                properties:
                  configMapRef:
                    properties:
                      name:
                        type: string
                    type: object
                type: object
              clusterDomain:
                format: hostname
                type: string
              clusterSpecList:
                items:
                  description: |-
                    ClusterSpecItem is the mongodb multi-cluster spec that is specific to a
                    particular Kubernetes cluster, this maps to the statefulset created in each cluster
                  properties:
                    clusterName:
                      description: |-
                        ClusterName is name of the cluster where the MongoDB Statefulset will be scheduled, the
                        name should have a one on one mapping with the service-account created in the central cluster
                        to talk to the workload clusters.
                      type: string
                    externalAccess:
                      description: ExternalAccessConfiguration provides external access
                        configuration for Multi-Cluster.
                      properties:
                        externalDomain:
                          description: An external domain that is used for exposing
                            MongoDB to the outside world.
                          type: string
                        externalService:
                          description: Provides a way to override the default (NodePort)
                            Service
                          properties:
                            annotations:
                              additionalProperties:
                                type: string
                              description: A map of annotations that shall be added
                                to the externally available Service.
                              type: object
                            spec:
                              description: A wrapper for the Service spec object.
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          type: object
                      type: object
                    memberConfig:
                      description: MemberConfig allows to specify votes, priorities
                        and tags for each of the mongodb process.
                      items:
                        properties:
                          priority:
                            type: string
                          tags:
                            additionalProperties:
                              type: string
                            type: object
                          votes:
                            type: integer
                        type: object
                      type: array
                    members:
                      description: Amount of members for this MongoDB Replica Set
                      type: integer
                    podSpec:
                      properties:
                        persistence:
                          description: Note, that this field is used by MongoDB resources
                            only, let's keep it here for simplicity
                          properties:
                            multiple:
                              properties:
                                data:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                                journal:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                                logs:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                              type: object
                            single:
                              properties:
                                labelSelector:
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                                storage:
                                  type: string
                                storageClass:
                                  type: string
                              type: object
                          type: object
                        podTemplate:
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                      type: object
                    service:
                      description: this is an optional service, it will get the name
                        "<rsName>-service" in case not provided
                      type: string
                    statefulSet:
                      description: |-
                        StatefulSetConfiguration holds the optional custom StatefulSet
                        that should be merged into the operator created one.
                      properties:
                        metadata:
                          description: StatefulSetMetadataWrapper is a wrapper around
                            Labels and Annotations
                          properties:
                            annotations:
                              additionalProperties:
                                type: string
                              type: object
                            labels:
                              additionalProperties:
                                type: string
                              type: object
                          type: object
                        spec:
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                      required:
                      - spec
                      type: object
                  required:
                  - members
                  type: object
                type: array
              connectivity:
                properties:
                  replicaSetHorizons:
                    description: |-
                      ReplicaSetHorizons holds list of maps of horizons to be configured in each of MongoDB processes.
                      Horizons map horizon names to the node addresses for each process in the replicaset, e.g.:
                       [
                         {
                           "internal": "my-rs-0.my-internal-domain.com:31843",
                           "external": "my-rs-0.my-external-domain.com:21467"
                         },
                         {
                           "internal": "my-rs-1.my-internal-domain.com:31843",
                           "external": "my-rs-1.my-external-domain.com:21467"
                         },
                         ...
                       ]
                      The key of each item in the map is an arbitrary, user-chosen string that
                      represents the name of the horizon. The value of the item is the host and,
                      optionally, the port that this mongod node will be connected to from.
                    items:
                      additionalProperties:
                        type: string
                      type: object
                    type: array
                type: object
              credentials:
                description: Name of the Secret holding credentials information
                type: string
              duplicateServiceObjects:
                description: |-
                  In few service mesh options for ex: Istio, by default we would need to duplicate the
                  service objects created per pod in all the clusters to enable DNS resolution. Users can
                  however configure their ServiceMesh with DNS proxy(https://istio.io/latest/docs/ops/configuration/traffic-management/dns-proxy/)
                  enabled in which case the operator doesn't need to create the service objects per cluster. This options tells the operator
                  whether it should create the service objects in all the clusters or not. By default, if not specified the operator would create the duplicate svc objects.
                type: boolean
              externalAccess:
                description: ExternalAccessConfiguration provides external access
                  configuration.
                properties:
                  externalDomain:
                    description: An external domain that is used for exposing MongoDB
                      to the outside world.
                    type: string
                  externalService:
                    description: Provides a way to override the default (NodePort)
                      Service
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        description: A map of annotations that shall be added to the
                          externally available Service.
                        type: object
                      spec:
                        description: A wrapper for the Service spec object.
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                type: object
              featureCompatibilityVersion:
                type: string
              logLevel:
                enum:
                - DEBUG
                - INFO
                - WARN
                - ERROR
                - FATAL
                type: string
              opsManager:
                properties:
                  configMapRef:
                    properties:
                      name:
                        type: string
                    type: object
                type: object
              persistent:
                type: boolean
              prometheus:
                description: Prometheus configurations.
                properties:
                  metricsPath:
                    description: Indicates path to the metrics endpoint.
                    pattern: ^\/[a-z0-9]+$
                    type: string
                  passwordSecretRef:
                    description: Name of a Secret containing a HTTP Basic Auth Password.
                    properties:
                      key:
                        description: Key is the key in the secret storing this password.
                          Defaults to "password"
                        type: string
                      name:
                        description: Name is the name of the secret storing this user's
                          password
                        type: string
                    required:
                    - name
                    type: object
                  port:
                    description: Port where metrics endpoint will bind to. Defaults
                      to 9216.
                    type: integer
                  tlsSecretKeyRef:
                    description: |-
                      Name of a Secret (type kubernetes.io/tls) holding the certificates to use in the
                      Prometheus endpoint.
                    properties:
                      key:
                        description: Key is the key in the secret storing this password.
                          Defaults to "password"
                        type: string
                      name:
                        description: Name is the name of the secret storing this user's
                          password
                        type: string
                    required:
                    - name
                    type: object
                  username:
                    description: HTTP Basic Auth Username for metrics endpoint.
                    type: string
                required:
                - passwordSecretRef
                - username
                type: object
              security:
                properties:
                  authentication:
                    description: |-
                      Authentication holds various authentication related settings that affect
                      this MongoDB resource.
                    properties:
                      agents:
                        description: Agents contains authentication configuration
                          properties for the agents
                        properties:
                          automationLdapGroupDN:
                            type: string
                          automationPasswordSecretRef:
                            description: SecretKeySelector selects a key of a Secret.
                            properties:
                              key:
                                description: The key of the secret to select from.  Must
                                  be a valid secret key.
                                type: string
                              name:
                                default: ""
                                description: |-
                                  Name of the referent.
                                  This field is effectively required, but due to backwards compatibility is
                                  allowed to be empty. Instances of this type with an empty value here are
                                  almost certainly wrong.
                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                  TODO: Drop `kubebuilder:default` when controller-gen doesn't need it https://github.com/kubernetes-sigs/kubebuilder/issues/3896.
                                type: string
                              optional:
                                description: Specify whether the Secret or its key
                                  must be defined
                                type: boolean
                            required:
                            - key
                            type: object
                            x-kubernetes-map-type: atomic
                          automationUserName:
                            type: string
                          clientCertificateSecretRef:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          mode:
                            description: Mode is the desired Authentication mode that
                              the agents will use
                            type: string
                        required:
                        - mode
                        type: object
                      enabled:
                        type: boolean
                      ignoreUnknownUsers:
                        description: IgnoreUnknownUsers maps to the inverse of auth.authoritativeSet
                        type: boolean
                      internalCluster:
                        type: string
                      ldap:
                        description: LDAP Configuration
                        properties:
                          authzQueryTemplate:
                            type: string
                          bindQueryPasswordSecretRef:
                            properties:
                              name:
                                type: string
                            required:
                            - name
                            type: object
                          bindQueryUser:
                            type: string
                          caConfigMapRef:
                            description: Allows to point at a ConfigMap/key with a
                              CA file to mount on the Pod
                            properties:
                              key:
                                description: The key to select.
                                type: string
                              name:
                                default: ""
                                description: |-
                                  Name of the referent.
                                  This field is effectively required, but due to backwards compatibility is
                                  allowed to be empty. Instances of this type with an empty value here are
                                  almost certainly wrong.
                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                  TODO: Drop `kubebuilder:default` when controller-gen doesn't need it https://github.com/kubernetes-sigs/kubebuilder/issues/3896.
                                type: string
                              optional:
                                description: Specify whether the ConfigMap or its
                                  key must be defined
                                type: boolean
                            required:
                            - key
                            type: object
                            x-kubernetes-map-type: atomic
                          servers:
                            items:
                              type: string
                            type: array
                          timeoutMS:
                            type: integer
                          transportSecurity:
                            enum:
                            - tls
                            - none
                            type: string
                          userCacheInvalidationInterval:
                            type: integer
                          userToDNMapping:
                            type: string
                          validateLDAPServerConfig:
                            type: boolean
                        type: object
                      modes:
                        items:
                          enum:
                          - X509
                          - SCRAM
                          - SCRAM-SHA-1
                          - MONGODB-CR
                          - SCRAM-SHA-256
                          - LDAP
                          type: string
                        type: array
                      requireClientTLSAuthentication:
                        description: Clients should present valid TLS certificates
                        type: boolean
                    required:
                    - enabled
                    type: object
                  certsSecretPrefix:
                    type: string
                  roles:
                    items:
                      properties:
                        authenticationRestrictions:
                          items:
                            properties:
                              clientSource:
                                items:
                                  type: string
                                type: array
                              serverAddress:
                                items:
                                  type: string
                                type: array
                            type: object
                          type: array
                        db:
                          type: string
                        privileges:
                          items:
                            properties:
                              actions:
                                items:
                                  type: string
                                type: array
                              resource:
                                properties:
                                  cluster:
                                    type: boolean
                                  collection:
                                    type: string
                                  db:
                                    type: string
                                type: object
                            required:
                            - actions
                            - resource
                            type: object
                          type: array
                        role:
                          type: string
                        roles:
                          items:
                            properties:
                              db:
                                type: string
                              role:
                                type: string
                            required:
                            - db
                            - role
                            type: object
                          type: array
                      required:
                      - db
                      - role
                      type: object
                    type: array
                  tls:
                    properties:
                      additionalCertificateDomains:
                        items:
                          type: string
                        type: array
                      ca:
                        description: |-
                          CA corresponds to a ConfigMap containing an entry for the CA certificate (ca.pem)
                          used to validate the certificates created already.
                        type: string
                      enabled:
                        description: |-
                          DEPRECATED please enable TLS by setting `security.certsSecretPrefix` or `security.tls.secretRef.prefix`.
                          Enables TLS for this resource. This will make the operator try to mount a
                          Secret with a defined name (<resource-name>-cert).
                          This is only used when enabling TLS on a MongoDB resource, and not on the
                          AppDB, where TLS is configured by setting `secretRef.Name`.
                        type: boolean
                    type: object
                type: object
              statefulSet:
                description: |-
                  StatefulSetConfiguration provides the statefulset override for each of the cluster's statefulset
                  if "StatefulSetConfiguration" is specified at cluster level under "clusterSpecList" that takes precedence over
                  the global one
                properties:
                  metadata:
                    description: StatefulSetMetadataWrapper is a wrapper around Labels
                      and Annotations
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - spec
                type: object
              topology:
                description: |-
                  Topology sets the desired cluster topology of MongoDB resources
                  It defaults (if empty or not set) to SingleCluster. If MultiCluster specified,
                  then clusterSpecList field is mandatory and at least one member cluster has to be specified.
                enum:
                - SingleCluster
                - MultiCluster
                type: string
              type:
                enum:
                - Standalone
                - ReplicaSet
                - ShardedCluster
                type: string
              version:
                pattern: ^[0-9]+.[0-9]+.[0-9]+(-.+)?$|^$
                type: string
            required:
            - credentials
            - type
            - version
            type: object
            x-kubernetes-preserve-unknown-fields: true
          status:
            properties:
              backup:
                properties:
                  statusName:
                    type: string
                required:
                - statusName
                type: object
              clusterStatusList:
                description: ClusterStatusList holds a list of clusterStatuses corresponding
                  to each cluster
                properties:
                  clusterStatuses:
                    items:
                      description: |-
                        ClusterStatusItem is the mongodb multi-cluster spec that is specific to a
                        particular Kubernetes cluster, this maps to the statefulset created in each cluster
                      properties:
                        clusterName:
                          description: |-
                            ClusterName is name of the cluster where the MongoDB Statefulset will be scheduled, the
                            name should have a one on one mapping with the service-account created in the central cluster
                            to talk to the workload clusters.
                          type: string
                        lastTransition:
                          type: string
                        members:
                          type: integer
                        message:
                          type: string
                        observedGeneration:
                          format: int64
                          type: integer
                        phase:
                          type: string
                        pvc:
                          items:
                            properties:
                              phase:
                                type: string
                              statefulsetName:
                                type: string
                            required:
                            - phase
                            - statefulsetName
                            type: object
                          type: array
                        resourcesNotReady:
                          items:
                            description: ResourceNotReady describes the dependent
                              resource which is not ready yet
                            properties:
                              errors:
                                items:
                                  properties:
                                    message:
                                      type: string
                                    reason:
                                      type: string
                                  type: object
                                type: array
                              kind:
                                description: ResourceKind specifies a kind of a Kubernetes
                                  resource. Used in status of a Custom Resource
                                type: string
                              message:
                                type: string
                              name:
                                type: string
                            required:
                            - kind
                            - name
                            type: object
                          type: array
                        warnings:
                          items:
                            type: string
                          type: array
                      required:
                      - phase
                      type: object
                    type: array
                type: object
              featureCompatibilityVersion:
                type: string
              lastTransition:
                type: string
              link:
                type: string
              message:
                type: string
              observedGeneration:
                format: int64
                type: integer
              phase:
                type: string
              pvc:
                items:
                  properties:
                    phase:
                      type: string
                    statefulsetName:
                      type: string
                  required:
                  - phase
                  - statefulsetName
                  type: object
                type: array
              resourcesNotReady:
                items:
                  description: ResourceNotReady describes the dependent resource which
                    is not ready yet
                  properties:
                    errors:
                      items:
                        properties:
                          message:
                            type: string
                          reason:
                            type: string
                        type: object
                      type: array
                    kind:
                      description: ResourceKind specifies a kind of a Kubernetes resource.
                        Used in status of a Custom Resource
                      type: string
                    message:
                      type: string
                    name:
                      type: string
                  required:
                  - kind
                  - name
                  type: object
                type: array
              version:
                type: string
              warnings:
                items:
                  type: string
                type: array
            required:
            - phase
            - version
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: mongodbusers.mongodb.com
spec:
  group: mongodb.com
  names:
    kind: MongoDBUser
    listKind: MongoDBUserList
    plural: mongodbusers
    shortNames:
    - mdbu
    singular: mongodbuser
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: The current state of the MongoDB User.
      jsonPath: .status.phase
      name: Phase
      type: string
    - description: The time since the MongoDB User resource was created.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            properties:
              connectionStringSecretName:
                type: string
              db:
                type: string
              mongodbResourceRef:
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                required:
                - name
                type: object
              passwordSecretKeyRef:
                description: |-
                  SecretKeyRef is a reference to a value in a given secret in the same
                  namespace. Based on:
                  https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.15/#secretkeyselector-v1-core
                properties:
                  key:
                    type: string
                  name:
                    type: string
                required:
                - name
                type: object
              roles:
                items:
                  properties:
                    db:
                      type: string
                    name:
                      type: string
                  required:
                  - db
                  - name
                  type: object
                type: array
              username:
                type: string
            required:
            - db
            - username
            type: object
          status:
            properties:
              db:
                type: string
              lastTransition:
                type: string
              message:
                type: string
              observedGeneration:
                format: int64
                type: integer
              phase:
                type: string
              project:
                type: string
              pvc:
                items:
                  properties:
                    phase:
                      type: string
                    statefulsetName:
                      type: string
                  required:
                  - phase
                  - statefulsetName
                  type: object
                type: array
              resourcesNotReady:
                items:
                  description: ResourceNotReady describes the dependent resource which
                    is not ready yet
                  properties:
                    errors:
                      items:
                        properties:
                          message:
                            type: string
                          reason:
                            type: string
                        type: object
                      type: array
                    kind:
                      description: ResourceKind specifies a kind of a Kubernetes resource.
                        Used in status of a Custom Resource
                      type: string
                    message:
                      type: string
                    name:
                      type: string
                  required:
                  - kind
                  - name
                  type: object
                type: array
              roles:
                items:
                  properties:
                    db:
                      type: string
                    name:
                      type: string
                  required:
                  - db
                  - name
                  type: object
                type: array
              username:
                type: string
              warnings:
                items:
                  type: string
                type: array
            required:
            - db
            - phase
            - project
            - username
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: opsmanagers.mongodb.com
spec:
  group: mongodb.com
  names:
    kind: MongoDBOpsManager
    listKind: MongoDBOpsManagerList
    plural: opsmanagers
    shortNames:
    - om
    singular: opsmanager
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: The number of replicas of MongoDBOpsManager.
      jsonPath: .spec.replicas
      name: Replicas
      type: integer
    - description: The version of MongoDBOpsManager.
      jsonPath: .spec.version
      name: Version
      type: string
    - description: The current state of the MongoDBOpsManager.
      jsonPath: .status.opsManager.phase
      name: State (OpsManager)
      type: string
    - description: The current state of the MongoDBOpsManager Application Database.
      jsonPath: .status.applicationDatabase.phase
      name: State (AppDB)
      type: string
    - description: The current state of the MongoDBOpsManager Backup Daemon.
      jsonPath: .status.backup.phase
      name: State (Backup)
      type: string
    - description: The time since the MongoDBOpsManager resource was created.
      jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    - description: Warnings.
      jsonPath: .status.warnings
      name: Warnings
      type: string
    name: v1
    schema:
      openAPIV3Schema:
        description: The MongoDBOpsManager resource allows you to deploy Ops Manager
          within your Kubernetes cluster
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            properties:
              adminCredentials:
                description: |-
                  AdminSecret is the secret for the first admin user to create
                  has the fields: "Username", "Password", "FirstName", "LastName"
                type: string
              applicationDatabase:
                properties:
                  additionalMongodConfig:
                    description: |-
                      AdditionalMongodConfig are additional configurations that can be passed to
                      each data-bearing mongod at runtime. Uses the same structure as the mongod
                      configuration file:
                      https://docs.mongodb.com/manual/reference/configuration-options/
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  agent:
                    description: specify configuration like startup flags and automation
                      config settings for the AutomationAgent and MonitoringAgent
                    properties:
                      backupAgent:
                        properties:
                          logRotate:
                            description: LogRotate configures log rotation for the
                              BackupAgent processes
                            properties:
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  OM only supports ints
                                type: integer
                              timeThresholdHrs:
                                description: Number of hours after which this MongoDB
                                  Agent rotates the log file.
                                type: integer
                            type: object
                        type: object
                      logLevel:
                        type: string
                      logRotate:
                        description: DEPRECATED please use mongod.logRotate
                        properties:
                          includeAuditLogsWithMongoDBLogs:
                            description: |-
                              set to 'true' to have the Automation Agent rotate the audit files along
                              with mongodb log files
                            type: boolean
                          numTotal:
                            description: maximum number of log files to have total
                            type: integer
                          numUncompressed:
                            description: maximum number of log files to leave uncompressed
                            type: integer
                          percentOfDiskspace:
                            description: |-
                              Maximum percentage of the total disk space these log files should take up.
                              The string needs to be able to be converted to float64
                            type: string
                          sizeThresholdMB:
                            description: |-
                              Maximum size for an individual log file before rotation.
                              The string needs to be able to be converted to float64.
                              Fractional values of MB are supported.
                            type: string
                          timeThresholdHrs:
                            description: maximum hours for an individual log file
                              before rotation
                            type: integer
                        required:
                        - sizeThresholdMB
                        - timeThresholdHrs
                        type: object
                      maxLogFileDurationHours:
                        type: integer
                      mongod:
                        description: AgentLoggingMongodConfig contain settings for
                          the mongodb processes configured by the agent
                        properties:
                          auditlogRotate:
                            description: LogRotate configures audit log rotation for
                              the mongodb processes
                            properties:
                              includeAuditLogsWithMongoDBLogs:
                                description: |-
                                  set to 'true' to have the Automation Agent rotate the audit files along
                                  with mongodb log files
                                type: boolean
                              numTotal:
                                description: maximum number of log files to have total
                                type: integer
                              numUncompressed:
                                description: maximum number of log files to leave
                                  uncompressed
                                type: integer
                              percentOfDiskspace:
                                description: |-
                                  Maximum percentage of the total disk space these log files should take up.
                                  The string needs to be able to be converted to float64
                                type: string
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  The string needs to be able to be converted to float64.
                                  Fractional values of MB are supported.
                                type: string
                              timeThresholdHrs:
                                description: maximum hours for an individual log file
                                  before rotation
                                type: integer
                            required:
                            - sizeThresholdMB
                            - timeThresholdHrs
                            type: object
                          logRotate:
                            description: LogRotate configures log rotation for the
                              mongodb processes
                            properties:
                              includeAuditLogsWithMongoDBLogs:
                                description: |-
                                  set to 'true' to have the Automation Agent rotate the audit files along
                                  with mongodb log files
                                type: boolean
                              numTotal:
                                description: maximum number of log files to have total
                                type: integer
                              numUncompressed:
                                description: maximum number of log files to leave
                                  uncompressed
                                type: integer
                              percentOfDiskspace:
                                description: |-
                                  Maximum percentage of the total disk space these log files should take up.
                                  The string needs to be able to be converted to float64
                                type: string
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  The string needs to be able to be converted to float64.
                                  Fractional values of MB are supported.
                                type: string
                              timeThresholdHrs:
                                description: maximum hours for an individual log file
                                  before rotation
                                type: integer
                            required:
                            - sizeThresholdMB
                            - timeThresholdHrs
                            type: object
                          systemLog:
                            description: SystemLog configures system log of mongod
                            properties:
                              destination:
                                type: string
                              logAppend:
                                type: boolean
                              path:
                                type: string
                            required:
                            - destination
                            - logAppend
                            - path
                            type: object
                        type: object
                      monitoringAgent:
                        properties:
                          logRotate:
                            description: LogRotate configures log rotation for the
                              BackupAgent processes
                            properties:
                              sizeThresholdMB:
                                description: |-
                                  Maximum size for an individual log file before rotation.
                                  OM only supports ints
                                type: integer
                              timeThresholdHrs:
                                description: Number of hours after which this MongoDB
                                  Agent rotates the log file.
                                type: integer
                            type: object
                        type: object
                      readinessProbe:
                        properties:
                          environmentVariables:
                            additionalProperties:
                              type: string
                            type: object
                        type: object
                      startupOptions:
                        additionalProperties:
                          type: string
                        description: |-
                          StartupParameters can be used to configure the startup parameters with which the agent starts. That also contains
                          log rotation settings as defined here:
                        type: object
                      systemLog:
                        description: DEPRECATED please use mongod.systemLog
                        properties:
                          destination:
                            type: string
                          logAppend:
                            type: boolean
                          path:
                            type: string
                        required:
                        - destination
                        - logAppend
                        - path
                        type: object
                    type: object
                  automationConfig:
                    description: |-
                      AutomationConfigOverride holds any fields that will be merged on top of the Automation Config
                      that the operator creates for the AppDB. Currently only the process.disabled and logRotate field is recognized.
                    properties:
                      processes:
                        items:
                          description: OverrideProcess contains fields that we can
                            override on the AutomationConfig processes.
                          properties:
                            disabled:
                              type: boolean
                            logRotate:
                              description: CrdLogRotate is the crd definition of LogRotate
                                including fields in strings while the agent supports
                                them as float64
                              properties:
                                includeAuditLogsWithMongoDBLogs:
                                  description: |-
                                    set to 'true' to have the Automation Agent rotate the audit files along
                                    with mongodb log files
                                  type: boolean
                                numTotal:
                                  description: maximum number of log files to have
                                    total
                                  type: integer
                                numUncompressed:
                                  description: maximum number of log files to leave
                                    uncompressed
                                  type: integer
                                percentOfDiskspace:
                                  description: |-
                                    Maximum percentage of the total disk space these log files should take up.
                                    The string needs to be able to be converted to float64
                                  type: string
                                sizeThresholdMB:
                                  description: |-
                                    Maximum size for an individual log file before rotation.
                                    The string needs to be able to be converted to float64.
                                    Fractional values of MB are supported.
                                  type: string
                                timeThresholdHrs:
                                  description: maximum hours for an individual log
                                    file before rotation
                                  type: integer
                              required:
                              - sizeThresholdMB
                              - timeThresholdHrs
                              type: object
                            name:
                              type: string
                          required:
                          - disabled
                          - name
                          type: object
                        type: array
                      replicaSet:
                        properties:
                          settings:
                            description: |-
                              MapWrapper is a wrapper for a map to be used by other structs.
                              The CRD generator does not support map[string]interface{}
                              on the top level and hence we need to work around this with
                              a wrapping struct.
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                    type: object
                  cloudManager:
                    properties:
                      configMapRef:
                        properties:
                          name:
                            type: string
                        type: object
                    type: object
                  clusterDomain:
                    type: string
                  clusterSpecList:
                    items:
                      description: |-
                        ClusterSpecItem is the mongodb multi-cluster spec that is specific to a
                        particular Kubernetes cluster, this maps to the statefulset created in each cluster
                      properties:
                        clusterName:
                          description: |-
                            ClusterName is name of the cluster where the MongoDB Statefulset will be scheduled, the
                            name should have a one on one mapping with the service-account created in the central cluster
                            to talk to the workload clusters.
                          type: string
                        externalAccess:
                          description: ExternalAccessConfiguration provides external
                            access configuration for Multi-Cluster.
                          properties:
                            externalDomain:
                              description: An external domain that is used for exposing
                                MongoDB to the outside world.
                              type: string
                            externalService:
                              description: Provides a way to override the default
                                (NodePort) Service
                              properties:
                                annotations:
                                  additionalProperties:
                                    type: string
                                  description: A map of annotations that shall be
                                    added to the externally available Service.
                                  type: object
                                spec:
                                  description: A wrapper for the Service spec object.
                                  type: object
                                  x-kubernetes-preserve-unknown-fields: true
                              type: object
                          type: object
                        memberConfig:
                          description: MemberConfig allows to specify votes, priorities
                            and tags for each of the mongodb process.
                          items:
                            properties:
                              priority:
                                type: string
                              tags:
                                additionalProperties:
                                  type: string
                                type: object
                              votes:
                                type: integer
                            type: object
                          type: array
                        members:
                          description: Amount of members for this MongoDB Replica
                            Set
                          type: integer
                        podSpec:
                          properties:
                            persistence:
                              description: Note, that this field is used by MongoDB
                                resources only, let's keep it here for simplicity
                              properties:
                                multiple:
                                  properties:
                                    data:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                    journal:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                    logs:
                                      properties:
                                        labelSelector:
                                          type: object
                                          x-kubernetes-preserve-unknown-fields: true
                                        storage:
                                          type: string
                                        storageClass:
                                          type: string
                                      type: object
                                  type: object
                                single:
                                  properties:
                                    labelSelector:
                                      type: object
                                      x-kubernetes-preserve-unknown-fields: true
                                    storage:
                                      type: string
                                    storageClass:
                                      type: string
                                  type: object
                              type: object
                            podTemplate:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          type: object
                        service:
                          description: this is an optional service, it will get the
                            name "<rsName>-service" in case not provided
                          type: string
                        statefulSet:
                          description: |-
                            StatefulSetConfiguration holds the optional custom StatefulSet
                            that should be merged into the operator created one.
                          properties:
                            metadata:
                              description: StatefulSetMetadataWrapper is a wrapper
                                around Labels and Annotations
                              properties:
                                annotations:
                                  additionalProperties:
                                    type: string
                                  type: object
                                labels:
                                  additionalProperties:
                                    type: string
                                  type: object
                              type: object
                            spec:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - spec
                          type: object
                      required:
                      - members
                      type: object
                    type: array
                  connectivity:
                    properties:
                      replicaSetHorizons:
                        description: |-
                          ReplicaSetHorizons holds list of maps of horizons to be configured in each of MongoDB processes.
                          Horizons map horizon names to the node addresses for each process in the replicaset, e.g.:
                           [
                             {
                               "internal": "my-rs-0.my-internal-domain.com:31843",
                               "external": "my-rs-0.my-external-domain.com:21467"
                             },
                             {
                               "internal": "my-rs-1.my-internal-domain.com:31843",
                               "external": "my-rs-1.my-external-domain.com:21467"
                             },
                             ...
                           ]
                          The key of each item in the map is an arbitrary, user-chosen string that
                          represents the name of the horizon. The value of the item is the host and,
                          optionally, the port that this mongod node will be connected to from.
                        items:
                          additionalProperties:
                            type: string
                          type: object
                        type: array
                    type: object
                  credentials:
                    description: Name of the Secret holding credentials information
                    type: string
                  featureCompatibilityVersion:
                    type: string
                  memberConfig:
                    description: MemberConfig allows to specify votes, priorities
                      and tags for each of the mongodb process.
                    items:
                      properties:
                        priority:
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          type: object
                        votes:
                          type: integer
                      type: object
                    type: array
                  members:
                    description: Amount of members for this MongoDB Replica Set
                    maximum: 50
                    minimum: 3
                    type: integer
                  monitoringAgent:
                    description: |-
                      Specify configuration like startup flags just for the MonitoringAgent.
                      These take precedence over
                      the flags set in AutomationAgent
                    properties:
                      startupOptions:
                        additionalProperties:
                          type: string
                        description: |-
                          StartupParameters can be used to configure the startup parameters with which the agent starts. That also contains
                          log rotation settings as defined here:
                        type: object
                    required:
                    - startupOptions
                    type: object
                  opsManager:
                    properties:
                      configMapRef:
                        properties:
                          name:
                            type: string
                        type: object
                    type: object
                  passwordSecretKeyRef:
                    description: |-
                      PasswordSecretKeyRef contains a reference to the secret which contains the password
                      for the mongodb-ops-manager SCRAM-SHA user
                    properties:
                      key:
                        type: string
                      name:
                        type: string
                    required:
                    - name
                    type: object
                  podSpec:
                    properties:
                      persistence:
                        description: Note, that this field is used by MongoDB resources
                          only, let's keep it here for simplicity
                        properties:
                          multiple:
                            properties:
                              data:
                                properties:
                                  labelSelector:
                                    type: object
                                    x-kubernetes-preserve-unknown-fields: true
                                  storage:
                                    type: string
                                  storageClass:
                                    type: string
                                type: object
                              journal:
                                properties:
                                  labelSelector:
                                    type: object
                                    x-kubernetes-preserve-unknown-fields: true
                                  storage:
                                    type: string
                                  storageClass:
                                    type: string
                                type: object
                              logs:
                                properties:
                                  labelSelector:
                                    type: object
                                    x-kubernetes-preserve-unknown-fields: true
                                  storage:
                                    type: string
                                  storageClass:
                                    type: string
                                type: object
                            type: object
                          single:
                            properties:
                              labelSelector:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                        type: object
                      podTemplate:
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                  prometheus:
                    description: Enables Prometheus integration on the AppDB.
                    properties:
                      metricsPath:
                        description: Indicates path to the metrics endpoint.
                        pattern: ^\/[a-z0-9]+$
                        type: string
                      passwordSecretRef:
                        description: Name of a Secret containing a HTTP Basic Auth
                          Password.
                        properties:
                          key:
                            description: Key is the key in the secret storing this
                              password. Defaults to "password"
                            type: string
                          name:
                            description: Name is the name of the secret storing this
                              user's password
                            type: string
                        required:
                        - name
                        type: object
                      port:
                        description: Port where metrics endpoint will bind to. Defaults
                          to 9216.
                        type: integer
                      tlsSecretKeyRef:
                        description: |-
                          Name of a Secret (type kubernetes.io/tls) holding the certificates to use in the
                          Prometheus endpoint.
                        properties:
                          key:
                            description: Key is the key in the secret storing this
                              password. Defaults to "password"
                            type: string
                          name:
                            description: Name is the name of the secret storing this
                              user's password
                            type: string
                        required:
                        - name
                        type: object
                      username:
                        description: HTTP Basic Auth Username for metrics endpoint.
                        type: string
                    required:
                    - passwordSecretRef
                    - username
                    type: object
                  security:
                    properties:
                      authentication:
                        description: |-
                          Authentication holds various authentication related settings that affect
                          this MongoDB resource.
                        properties:
                          agents:
                            description: Agents contains authentication configuration
                              properties for the agents
                            properties:
                              automationLdapGroupDN:
                                type: string
                              automationPasswordSecretRef:
                                description: SecretKeySelector selects a key of a
                                  Secret.
                                properties:
                                  key:
                                    description: The key of the secret to select from.  Must
                                      be a valid secret key.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      TODO: Add other useful fields. apiVersion, kind, uid?
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                      TODO: Drop `kubebuilder:default` when controller-gen doesn't need it https://github.com/kubernetes-sigs/kubebuilder/issues/3896.
                                    type: string
                                  optional:
                                    description: Specify whether the Secret or its
                                      key must be defined
                                    type: boolean
                                required:
                                - key
                                type: object
                                x-kubernetes-map-type: atomic
                              automationUserName:
                                type: string
                              clientCertificateSecretRef:
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                              mode:
                                description: Mode is the desired Authentication mode
                                  that the agents will use
                                type: string
                            required:
                            - mode
                            type: object
                          enabled:
                            type: boolean
                          ignoreUnknownUsers:
                            description: IgnoreUnknownUsers maps to the inverse of
                              auth.authoritativeSet
                            type: boolean
                          internalCluster:
                            type: string
                          ldap:
                            description: LDAP Configuration
                            properties:
                              authzQueryTemplate:
                                type: string
                              bindQueryPasswordSecretRef:
                                properties:
                                  name:
                                    type: string
                                required:
                                - name
                                type: object
                              bindQueryUser:
                                type: string
                              caConfigMapRef:
                                description: Allows to point at a ConfigMap/key with
                                  a CA file to mount on the Pod
                                properties:
                                  key:
                                    description: The key to select.
                                    type: string
                                  name:
                                    default: ""
                                    description: |-
                                      Name of the referent.
                                      This field is effectively required, but due to backwards compatibility is
                                      allowed to be empty. Instances of this type with an empty value here are
                                      almost certainly wrong.
                                      TODO: Add other useful fields. apiVersion, kind, uid?
                                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                      TODO: Drop `kubebuilder:default` when controller-gen doesn't need it https://github.com/kubernetes-sigs/kubebuilder/issues/3896.
                                    type: string
                                  optional:
                                    description: Specify whether the ConfigMap or
                                      its key must be defined
                                    type: boolean
                                required:
                                - key
                                type: object
                                x-kubernetes-map-type: atomic
                              servers:
                                items:
                                  type: string
                                type: array
                              timeoutMS:
                                type: integer
                              transportSecurity:
                                enum:
                                - tls
                                - none
                                type: string
                              userCacheInvalidationInterval:
                                type: integer
                              userToDNMapping:
                                type: string
                              validateLDAPServerConfig:
                                type: boolean
                            type: object
                          modes:
                            items:
                              enum:
                              - X509
                              - SCRAM
                              - SCRAM-SHA-1
                              - MONGODB-CR
                              - SCRAM-SHA-256
                              - LDAP
                              type: string
                            type: array
                          requireClientTLSAuthentication:
                            description: Clients should present valid TLS certificates
                            type: boolean
                        required:
                        - enabled
                        type: object
                      certsSecretPrefix:
                        type: string
                      roles:
                        items:
                          properties:
                            authenticationRestrictions:
                              items:
                                properties:
                                  clientSource:
                                    items:
                                      type: string
                                    type: array
                                  serverAddress:
                                    items:
                                      type: string
                                    type: array
                                type: object
                              type: array
                            db:
                              type: string
                            privileges:
                              items:
                                properties:
                                  actions:
                                    items:
                                      type: string
                                    type: array
                                  resource:
                                    properties:
                                      cluster:
                                        type: boolean
                                      collection:
                                        type: string
                                      db:
                                        type: string
                                    type: object
                                required:
                                - actions
                                - resource
                                type: object
                              type: array
                            role:
                              type: string
                            roles:
                              items:
                                properties:
                                  db:
                                    type: string
                                  role:
                                    type: string
                                required:
                                - db
                                - role
                                type: object
                              type: array
                          required:
                          - db
                          - role
                          type: object
                        type: array
                      tls:
                        properties:
                          additionalCertificateDomains:
                            items:
                              type: string
                            type: array
                          ca:
                            description: |-
                              CA corresponds to a ConfigMap containing an entry for the CA certificate (ca.pem)
                              used to validate the certificates created already.
                            type: string
                          enabled:
                            description: |-
                              DEPRECATED please enable TLS by setting `security.certsSecretPrefix` or `security.tls.secretRef.prefix`.
                              Enables TLS for this resource. This will make the operator try to mount a
                              Secret with a defined name (<resource-name>-cert).
                              This is only used when enabling TLS on a MongoDB resource, and not on the
                              AppDB, where TLS is configured by setting `secretRef.Name`.
                            type: boolean
                        type: object
                    type: object
                  service:
                    description: this is an optional service, it will get the name
                      "<rsName>-svc" in case not provided
                    type: string
                  topology:
                    enum:
                    - SingleCluster
                    - MultiCluster
                    type: string
                  type:
                    enum:
                    - Standalone
                    - ReplicaSet
                    - ShardedCluster
                    type: string
                  version:
                    pattern: ^[0-9]+.[0-9]+.[0-9]+(-.+)?$|^$
                    type: string
                required:
                - version
                type: object
              backup:
                description: Backup
                properties:
                  assignmentLabels:
                    description: Assignment Labels set in the Ops Manager
                    items:
                      type: string
                    type: array
                  blockStores:
                    items:
                      description: |-
                        DataStoreConfig is the description of the config used to reference to database. Reused by Oplog and Block stores
                        Optionally references the user if the Mongodb is configured with authentication
                      properties:
                        assignmentLabels:
                          description: Assignment Labels set in the Ops Manager
                          items:
                            type: string
                          type: array
                        mongodbResourceRef:
                          properties:
                            name:
                              type: string
                            namespace:
                              type: string
                          required:
                          - name
                          type: object
                        mongodbUserRef:
                          properties:
                            name:
                              type: string
                          required:
                          - name
                          type: object
                        name:
                          type: string
                      required:
                      - mongodbResourceRef
                      - name
                      type: object
                    type: array
                  enabled:
                    description: Enabled indicates if Backups will be enabled for
                      this Ops Manager.
                    type: boolean
                  encryption:
                    description: Encryption settings
                    properties:
                      kmip:
                        description: Kmip corresponds to the KMIP configuration assigned
                          to the Ops Manager Project's configuration.
                        properties:
                          server:
                            description: KMIP Server configuration
                            properties:
                              ca:
                                description: |-
                                  CA corresponds to a ConfigMap containing an entry for the CA certificate (ca.pem)
                                  used for KMIP authentication
                                type: string
                              url:
                                description: |-
                                  KMIP Server url in the following format: hostname:port
                                  Valid examples are:
                                    10.10.10.3:5696
                                    my-kmip-server.mycorp.com:5696
                                    kmip-svc.svc.cluster.local:5696
                                pattern: '[^\:]+:[0-9]{0,5}'
                                type: string
                            required:
                            - ca
                            - url
                            type: object
                        required:
                        - server
                        type: object
                    type: object
                  externalServiceEnabled:
                    type: boolean
                  fileSystemStores:
                    items:
                      properties:
                        name:
                          type: string
                      required:
                      - name
                      type: object
                    type: array
                  headDB:
                    description: HeadDB specifies configuration options for the HeadDB
                    properties:
                      labelSelector:
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                      storage:
                        type: string
                      storageClass:
                        type: string
                    type: object
                  jvmParameters:
                    items:
                      type: string
                    type: array
                  logging:
                    properties:
                      LogBackAccessRef:
                        description: LogBackAccessRef points at a ConfigMap/key with
                          the logback access configuration file to mount on the Pod
                        properties:
                          name:
                            type: string
                        type: object
                      LogBackRef:
                        description: LogBackRef points at a ConfigMap/key with the
                          logback configuration file to mount on the Pod
                        properties:
                          name:
                            type: string
                        type: object
                    type: object
                  members:
                    description: Members indicate the number of backup daemon pods
                      to create.
                    minimum: 1
                    type: integer
                  opLogStores:
                    description: OplogStoreConfigs describes the list of oplog store
                      configs used for backup
                    items:
                      description: |-
                        DataStoreConfig is the description of the config used to reference to database. Reused by Oplog and Block stores
                        Optionally references the user if the Mongodb is configured with authentication
                      properties:
                        assignmentLabels:
                          description: Assignment Labels set in the Ops Manager
                          items:
                            type: string
                          type: array
                        mongodbResourceRef:
                          properties:
                            name:
                              type: string
                            namespace:
                              type: string
                          required:
                          - name
                          type: object
                        mongodbUserRef:
                          properties:
                            name:
                              type: string
                          required:
                          - name
                          type: object
                        name:
                          type: string
                      required:
                      - mongodbResourceRef
                      - name
                      type: object
                    type: array
                  queryableBackupSecretRef:
                    description: |-
                      QueryableBackupSecretRef references the secret which contains the pem file which is used
                      for queryable backup. This will be mounted into the Ops Manager pod.
                    properties:
                      name:
                        type: string
                    required:
                    - name
                    type: object
                  s3OpLogStores:
                    description: S3OplogStoreConfigs describes the list of s3 oplog
                      store configs used for backup.
                    items:
                      properties:
                        assignmentLabels:
                          description: Assignment Labels set in the Ops Manager
                          items:
                            type: string
                          type: array
                        customCertificate:
                          description: |-
                            Set this to "true" to use the appDBCa as a CA to access S3.
                            Deprecated: This has been replaced by CustomCertificateSecretRefs,
                            In the future all custom certificates, which includes the appDBCa
                            for s3Config should be configured in CustomCertificateSecretRefs instead.
                          type: boolean
                        customCertificateSecretRefs:
                          description: |-
                            CustomCertificateSecretRefs is a list of valid Certificate Authority certificate secrets
                            that apply to the associated S3 bucket.
                          items:
                            description: SecretKeySelector selects a key of a Secret.
                            properties:
                              key:
                                description: The key of the secret to select from.  Must
                                  be a valid secret key.
                                type: string
                              name:
                                default: ""
                                description: |-
                                  Name of the referent.
                                  This field is effectively required, but due to backwards compatibility is
                                  allowed to be empty. Instances of this type with an empty value here are
                                  almost certainly wrong.
                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                  TODO: Drop `kubebuilder:default` when controller-gen doesn't need it https://github.com/kubernetes-sigs/kubebuilder/issues/3896.
                                type: string
                              optional:
                                description: Specify whether the Secret or its key
                                  must be defined
                                type: boolean
                            required:
                            - key
                            type: object
                            x-kubernetes-map-type: atomic
                          type: array
                        irsaEnabled:
                          description: |-
                            This is only set to "true" when a user is running in EKS and is using AWS IRSA to configure
                            S3 snapshot store. For more details refer this: https://aws.amazon.com/blogs/opensource/introducing-fine-grained-iam-roles-service-accounts/
                          type: boolean
                        mongodbResourceRef:
                          properties:
                            name:
                              type: string
                            namespace:
                              type: string
                          required:
                          - name
                          type: object
                        mongodbUserRef:
                          properties:
                            name:
                              type: string
                          required:
                          - name
                          type: object
                        name:
                          type: string
                        pathStyleAccessEnabled:
                          type: boolean
                        s3BucketEndpoint:
                          type: string
                        s3BucketName:
                          type: string
                        s3RegionOverride:
                          type: string
                        s3SecretRef:
                          properties:
                            name:
                              type: string
                          required:
                          - name
                          type: object
                      required:
                      - name
                      - pathStyleAccessEnabled
                      - s3BucketEndpoint
                      - s3BucketName
                      - s3SecretRef
                      type: object
                    type: array
                  s3Stores:
                    items:
                      properties:
                        assignmentLabels:
                          description: Assignment Labels set in the Ops Manager
                          items:
                            type: string
                          type: array
                        customCertificate:
                          description: |-
                            Set this to "true" to use the appDBCa as a CA to access S3.
                            Deprecated: This has been replaced by CustomCertificateSecretRefs,
                            In the future all custom certificates, which includes the appDBCa
                            for s3Config should be configured in CustomCertificateSecretRefs instead.
                          type: boolean
                        customCertificateSecretRefs:
                          description: |-
                            CustomCertificateSecretRefs is a list of valid Certificate Authority certificate secrets
                            that apply to the associated S3 bucket.
                          items:
                            description: SecretKeySelector selects a key of a Secret.
                            properties:
                              key:
                                description: The key of the secret to select from.  Must
                                  be a valid secret key.
                                type: string
                              name:
                                default: ""
                                description: |-
                                  Name of the referent.
                                  This field is effectively required, but due to backwards compatibility is
                                  allowed to be empty. Instances of this type with an empty value here are
                                  almost certainly wrong.
                                  TODO: Add other useful fields. apiVersion, kind, uid?
                                  More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                  TODO: Drop `kubebuilder:default` when controller-gen doesn't need it https://github.com/kubernetes-sigs/kubebuilder/issues/3896.
                                type: string
                              optional:
                                description: Specify whether the Secret or its key
                                  must be defined
                                type: boolean
                            required:
                            - key
                            type: object
                            x-kubernetes-map-type: atomic
                          type: array
                        irsaEnabled:
                          description: |-
                            This is only set to "true" when a user is running in EKS and is using AWS IRSA to configure
                            S3 snapshot store. For more details refer this: https://aws.amazon.com/blogs/opensource/introducing-fine-grained-iam-roles-service-accounts/
                          type: boolean
                        mongodbResourceRef:
                          properties:
                            name:
                              type: string
                            namespace:
                              type: string
                          required:
                          - name
                          type: object
                        mongodbUserRef:
                          properties:
                            name:
                              type: string
                          required:
                          - name
                          type: object
                        name:
                          type: string
                        pathStyleAccessEnabled:
                          type: boolean
                        s3BucketEndpoint:
                          type: string
                        s3BucketName:
                          type: string
                        s3RegionOverride:
                          type: string
                        s3SecretRef:
                          properties:
                            name:
                              type: string
                          required:
                          - name
                          type: object
                      required:
                      - name
                      - pathStyleAccessEnabled
                      - s3BucketEndpoint
                      - s3BucketName
                      - s3SecretRef
                      type: object
                    type: array
                  statefulSet:
                    description: |-
                      StatefulSetConfiguration holds the optional custom StatefulSet
                      that should be merged into the operator created one.
                    properties:
                      metadata:
                        description: StatefulSetMetadataWrapper is a wrapper around
                          Labels and Annotations
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            type: object
                          labels:
                            additionalProperties:
                              type: string
                            type: object
                        type: object
                      spec:
                        type: object
                        x-kubernetes-preserve-unknown-fields: true
                    required:
                    - spec
                    type: object
                required:
                - enabled
                type: object
              clusterDomain:
                format: hostname
                type: string
              clusterName:
                description: |-
                  Deprecated: This has been replaced by the ClusterDomain which should be
                  used instead
                format: hostname
                type: string
              clusterSpecList:
                items:
                  description: ClusterSpecOMItem defines members cluster details for
                    Ops Manager multi-cluster deployment.
                  properties:
                    backup:
                      description: |-
                        Backup contains settings to override from top-level `spec.backup` for this member cluster.
                        If the value is not set here, then the value is taken from `spec.backup`.
                      properties:
                        assignmentLabels:
                          description: Assignment Labels set in the Ops Manager
                          items:
                            type: string
                          type: array
                        headDB:
                          description: HeadDB specifies configuration options for
                            the HeadDB
                          properties:
                            labelSelector:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                            storage:
                              type: string
                            storageClass:
                              type: string
                          type: object
                        jvmParameters:
                          items:
                            type: string
                          type: array
                        members:
                          description: Members indicate the number of backup daemon
                            pods to create.
                          minimum: 0
                          type: integer
                        statefulSet:
                          description: StatefulSetConfiguration specified optional
                            overrides for backup datemon statefulset.
                          properties:
                            metadata:
                              description: StatefulSetMetadataWrapper is a wrapper
                                around Labels and Annotations
                              properties:
                                annotations:
                                  additionalProperties:
                                    type: string
                                  type: object
                                labels:
                                  additionalProperties:
                                    type: string
                                  type: object
                              type: object
                            spec:
                              type: object
                              x-kubernetes-preserve-unknown-fields: true
                          required:
                          - spec
                          type: object
                      type: object
                    clusterDomain:
                      description: Cluster domain to override the default *.svc.cluster.local
                        if the default cluster domain has been changed on a cluster
                        level.
                      format: hostname
                      type: string
                    clusterName:
                      description: |-
                        ClusterName is name of the cluster where the Ops Manager Statefulset will be scheduled.
                        The operator is using ClusterName to find API credentials in `mongodb-enterprise-operator-member-list` config map to use for this member cluster.
                        If the credentials are not found, then the member cluster is considered unreachable and ignored in the reconcile process.
                      type: string
                    configuration:
                      additionalProperties:
                        type: string
                      description: |-
                        The configuration properties passed to Ops Manager and Backup Daemon in this cluster.
                        If specified (not empty) then this field overrides `spec.configuration` field entirely.
                        If not specified, then `spec.configuration` field is used for the Ops Manager and Backup Daemon instances in this cluster.
                      type: object
                    externalConnectivity:
                      description: |-
                        MongoDBOpsManagerExternalConnectivity if sets allows for the creation of a Service for
                        accessing Ops Manager instances in this member cluster from outside the Kubernetes cluster.
                        If specified (even if provided empty) then this field overrides `spec.externalConnectivity` field entirely.
                        If not specified, then `spec.externalConnectivity` field is used for the Ops Manager and Backup Daemon instances in this cluster.
                      properties:
                        annotations:
                          additionalProperties:
                            type: string
                          description: Annotations is a list of annotations to be
                            directly passed to the Service object.
                          type: object
                        clusterIP:
                          description: ClusterIP IP that will be assigned to this
                            Service when creating a ClusterIP type Service
                          type: string
                        externalTrafficPolicy:
                          description: |-
                            ExternalTrafficPolicy mechanism to preserve the client source IP.
                            Only supported on GCE and Google Kubernetes Engine.
                          enum:
                          - Cluster
                          - Local
                          type: string
                        loadBalancerIP:
                          description: LoadBalancerIP IP that will be assigned to
                            this LoadBalancer.
                          type: string
                        port:
                          description: Port in which this `Service` will listen to,
                            this applies to `NodePort`.
                          format: int32
                          type: integer
                        type:
                          description: Type of the `Service` to be created.
                          enum:
                          - LoadBalancer
                          - NodePort
                          - ClusterIP
                          type: string
                      required:
                      - type
                      type: object
                    jvmParameters:
                      description: |-
                        JVM parameters to pass to Ops Manager and Backup Daemon instances in this member cluster.
                        If specified (not empty) then this field overrides `spec.jvmParameters` field entirely.
                        If not specified, then `spec.jvmParameters` field is used for the Ops Manager and Backup Daemon instances in this cluster.
                      items:
                        type: string
                      type: array
                    members:
                      description: Number of Ops Manager instances in this member
                        cluster.
                      type: integer
                    statefulSet:
                      description: |-
                        Configure custom StatefulSet configuration to override in Ops Manager's statefulset in this member cluster.
                        If specified (even if provided empty) then this field overrides `spec.externalConnectivity` field entirely.
                        If not specified, then `spec.externalConnectivity` field is used for the Ops Manager and Backup Daemon instances in this cluster.
                      properties:
                        metadata:
                          description: StatefulSetMetadataWrapper is a wrapper around
                            Labels and Annotations
                          properties:
                            annotations:
                              additionalProperties:
                                type: string
                              type: object
                            labels:
                              additionalProperties:
                                type: string
                              type: object
                          type: object
                        spec:
                          type: object
                          x-kubernetes-preserve-unknown-fields: true
                      required:
                      - spec
                      type: object
                  required:
                  - members
                  type: object
                type: array
              configuration:
                additionalProperties:
                  type: string
                description: The configuration properties passed to Ops Manager/Backup
                  Daemon
                type: object
              externalConnectivity:
                description: |-
                  MongoDBOpsManagerExternalConnectivity if sets allows for the creation of a Service for
                  accessing this Ops Manager resource from outside the Kubernetes cluster.
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    description: Annotations is a list of annotations to be directly
                      passed to the Service object.
                    type: object
                  clusterIP:
                    description: ClusterIP IP that will be assigned to this Service
                      when creating a ClusterIP type Service
                    type: string
                  externalTrafficPolicy:
                    description: |-
                      ExternalTrafficPolicy mechanism to preserve the client source IP.
                      Only supported on GCE and Google Kubernetes Engine.
                    enum:
                    - Cluster
                    - Local
                    type: string
                  loadBalancerIP:
                    description: LoadBalancerIP IP that will be assigned to this LoadBalancer.
                    type: string
                  port:
                    description: Port in which this `Service` will listen to, this
                      applies to `NodePort`.
                    format: int32
                    type: integer
                  type:
                    description: Type of the `Service` to be created.
                    enum:
                    - LoadBalancer
                    - NodePort
                    - ClusterIP
                    type: string
                required:
                - type
                type: object
              internalConnectivity:
                description: |-
                  InternalConnectivity if set allows for overriding the settings of the default service
                  used for internal connectivity to the OpsManager servers.
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    description: Annotations is a list of annotations to be directly
                      passed to the Service object.
                    type: object
                  clusterIP:
                    description: ClusterIP IP that will be assigned to this Service
                      when creating a ClusterIP type Service
                    type: string
                  externalTrafficPolicy:
                    description: |-
                      ExternalTrafficPolicy mechanism to preserve the client source IP.
                      Only supported on GCE and Google Kubernetes Engine.
                    enum:
                    - Cluster
                    - Local
                    type: string
                  loadBalancerIP:
                    description: LoadBalancerIP IP that will be assigned to this LoadBalancer.
                    type: string
                  port:
                    description: Port in which this `Service` will listen to, this
                      applies to `NodePort`.
                    format: int32
                    type: integer
                  type:
                    description: Type of the `Service` to be created.
                    enum:
                    - LoadBalancer
                    - NodePort
                    - ClusterIP
                    type: string
                required:
                - type
                type: object
              jvmParameters:
                description: Custom JVM parameters passed to the Ops Manager JVM
                items:
                  type: string
                type: array
              logging:
                properties:
                  LogBackAccessRef:
                    description: LogBackAccessRef points at a ConfigMap/key with the
                      logback access configuration file to mount on the Pod
                    properties:
                      name:
                        type: string
                    type: object
                  LogBackRef:
                    description: LogBackRef points at a ConfigMap/key with the logback
                      configuration file to mount on the Pod
                    properties:
                      name:
                        type: string
                    type: object
                type: object
              opsManagerURL:
                description: |-
                  OpsManagerURL specified the URL with which the operator and AppDB monitoring agent should access Ops Manager instance (or instances).
                  When not set, the operator is using FQDN of Ops Manager's headless service `{name}-svc.{namespace}.svc.cluster.local` to connect to the instance. If that URL cannot be used, then URL in this field should be provided for the operator to connect to Ops Manager instances.
                  It defaults (and if not set) to SingleCluster. If MultiCluster specified,
                  then clusterSpecList field is mandatory and at least one member cluster has to be specified.
                type: string
              replicas:
                minimum: 1
                type: integer
              security:
                description: Configure HTTPS.
                properties:
                  certsSecretPrefix:
                    type: string
                  tls:
                    properties:
                      ca:
                        type: string
                      secretRef:
                        properties:
                          name:
                            type: string
                        required:
                        - name
                        type: object
                    type: object
                type: object
              statefulSet:
                description: Configure custom StatefulSet configuration
                properties:
                  metadata:
                    description: StatefulSetMetadataWrapper is a wrapper around Labels
                      and Annotations
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  spec:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - spec
                type: object
              topology:
                description: |-
                  Topology sets the desired cluster topology of Ops Manager deployment.
                  It defaults (and if not set) to SingleCluster. If MultiCluster specified,
                  then clusterSpecList field is mandatory and at least one member cluster has to be specified.
                enum:
                - SingleCluster
                - MultiCluster
                type: string
              version:
                type: string
            required:
            - applicationDatabase
            - version
            type: object
          status:
            properties:
              applicationDatabase:
                properties:
                  backup:
                    properties:
                      statusName:
                        type: string
                    required:
                    - statusName
                    type: object
                  clusterStatusList:
                    items:
                      properties:
                        clusterName:
                          type: string
                        members:
                          type: integer
                      type: object
                    type: array
                  configServerCount:
                    type: integer
                  featureCompatibilityVersion:
                    type: string
                  lastTransition:
                    type: string
                  link:
                    type: string
                  members:
                    type: integer
                  message:
                    type: string
                  mongodsPerShardCount:
                    type: integer
                  mongosCount:
                    type: integer
                  observedGeneration:
                    format: int64
                    type: integer
                  phase:
                    type: string
                  pvc:
                    items:
                      properties:
                        phase:
                          type: string
                        statefulsetName:
                          type: string
                      required:
                      - phase
                      - statefulsetName
                      type: object
                    type: array
                  resourcesNotReady:
                    items:
                      description: ResourceNotReady describes the dependent resource
                        which is not ready yet
                      properties:
                        errors:
                          items:
                            properties:
                              message:
                                type: string
                              reason:
                                type: string
                            type: object
                          type: array
                        kind:
                          description: ResourceKind specifies a kind of a Kubernetes
                            resource. Used in status of a Custom Resource
                          type: string
                        message:
                          type: string
                        name:
                          type: string
                      required:
                      - kind
                      - name
                      type: object
                    type: array
                  shardCount:
                    type: integer
                  sizeStatusInClusters:
                    description: MongodbShardedSizeStatusInClusters describes the
                      number and sizes of replica sets members deployed across member
                      clusters
                    properties:
                      configServerMongodsInClusters:
                        additionalProperties:
                          type: integer
                        type: object
                      mongosCountInClusters:
                        additionalProperties:
                          type: integer
                        type: object
                      shardMongodsInClusters:
                        additionalProperties:
                          type: integer
                        type: object
                      shardOverridesInClusters:
                        additionalProperties:
                          additionalProperties:
                            type: integer
                          type: object
                        type: object
                    type: object
                  version:
                    type: string
                  warnings:
                    items:
                      type: string
                    type: array
                required:
                - phase
                - version
                type: object
              backup:
                properties:
                  clusterStatusList:
                    items:
                      properties:
                        clusterName:
                          type: string
                        replicas:
                          type: integer
                      type: object
                    type: array
                  lastTransition:
                    type: string
                  message:
                    type: string
                  observedGeneration:
                    format: int64
                    type: integer
                  phase:
                    type: string
                  pvc:
                    items:
                      properties:
                        phase:
                          type: string
                        statefulsetName:
                          type: string
                      required:
                      - phase
                      - statefulsetName
                      type: object
                    type: array
                  resourcesNotReady:
                    items:
                      description: ResourceNotReady describes the dependent resource
                        which is not ready yet
                      properties:
                        errors:
                          items:
                            properties:
                              message:
                                type: string
                              reason:
                                type: string
                            type: object
                          type: array
                        kind:
                          description: ResourceKind specifies a kind of a Kubernetes
                            resource. Used in status of a Custom Resource
                          type: string
                        message:
                          type: string
                        name:
                          type: string
                      required:
                      - kind
                      - name
                      type: object
                    type: array
                  version:
                    type: string
                  warnings:
                    items:
                      type: string
                    type: array
                required:
                - phase
                type: object
              opsManager:
                properties:
                  clusterStatusList:
                    items:
                      properties:
                        clusterName:
                          type: string
                        replicas:
                          type: integer
                      type: object
                    type: array
                  lastTransition:
                    type: string
                  message:
                    type: string
                  observedGeneration:
                    format: int64
                    type: integer
                  phase:
                    type: string
                  pvc:
                    items:
                      properties:
                        phase:
                          type: string
                        statefulsetName:
                          type: string
                      required:
                      - phase
                      - statefulsetName
                      type: object
                    type: array
                  replicas:
                    type: integer
                  resourcesNotReady:
                    items:
                      description: ResourceNotReady describes the dependent resource
                        which is not ready yet
                      properties:
                        errors:
                          items:
                            properties:
                              message:
                                type: string
                              reason:
                                type: string
                            type: object
                          type: array
                        kind:
                          description: ResourceKind specifies a kind of a Kubernetes
                            resource. Used in status of a Custom Resource
                          type: string
                        message:
                          type: string
                        name:
                          type: string
                      required:
                      - kind
                      - name
                      type: object
                    type: array
                  url:
                    type: string
                  version:
                    type: string
                  warnings:
                    items:
                      type: string
                    type: array
                required:
                - phase
                type: object
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
